diff --git a/node_modules/jwchat/lib/JwChat.common.js b/node_modules/jwchat/lib/JwChat.common.js
index 4057c09..9a32352 100644
--- a/node_modules/jwchat/lib/JwChat.common.js
+++ b/node_modules/jwchat/lib/JwChat.common.js
@@ -10320,8 +10320,8 @@ var PullDown = /** @class */ (function () {
         if (userOptions === void 0) { userOptions = {}; }
         userOptions = (userOptions === true ? {} : userOptions);
         var defaultOptions = {
-            threshold: 90,
-            stop: 40,
+            threshold: 40,//dxw edit:90 --> 40
+            stop: 40,//dxw edit:stop: 40 --> stop: 20
         };
         this.options = pull_down_esm_extend(defaultOptions, userOptions);
         this.scroll.options.probeType = 3 /* Realtime */;
@@ -10580,8 +10580,8 @@ var scroll_Scroll = /*#__PURE__*/function () {
     var scrollType = userConfig.scrollType,
         _userConfig$pullingDo = userConfig.pullingDown,
         pullingDown = _userConfig$pullingDo === void 0 ? {
-      threshold: 70,
-      stop: 56,
+      threshold: 40,//dxw edit:70 --> 40
+      stop: 40,//dxw edit:stop: 56 --> stop: 20
       mouseWheel: true
     } : _userConfig$pullingDo;
     scrollType && (this.scrollType = scrollType);
@@ -10641,7 +10641,7 @@ var scroll_Scroll = /*#__PURE__*/function () {
         'enter': "".concat(ARROW_BOTTOM, " \u4E0B\u62C9"),
         'leave': "".concat(ARROW_UP, " \u5237\u65B0"),
         'fetching': '加载中...',
-        'succeed': '刷新完成'
+        'succeed': '加载完成'//dxw edit 'succeed': '刷新完成' --> 'succeed': '加载完成'
       };
       this.tipText = TEXTS_MAP[phase];
     }
@@ -12082,6 +12082,7 @@ var shopTalk_component = normalizeComponent(
     },
     pullingDownHandler: function pullingDownHandler() {
       this.$emit("loadHistory");
+      this.scroll.finishPullDown();//dxw add
     },
     systemEvent: function systemEvent(itemData) {
       this.$emit("click", {
diff --git a/node_modules/jwchat/lib/JwChat.umd.js b/node_modules/jwchat/lib/JwChat.umd.js
index 4057c09..d8aab74 100644
--- a/node_modules/jwchat/lib/JwChat.umd.js
+++ b/node_modules/jwchat/lib/JwChat.umd.js
@@ -10320,8 +10320,8 @@ var PullDown = /** @class */ (function () {
         if (userOptions === void 0) { userOptions = {}; }
         userOptions = (userOptions === true ? {} : userOptions);
         var defaultOptions = {
-            threshold: 90,
-            stop: 40,
+            threshold: 40,
+            stop: 40,//dxw edit:stop: 40 --> stop: 20
         };
         this.options = pull_down_esm_extend(defaultOptions, userOptions);
         this.scroll.options.probeType = 3 /* Realtime */;
@@ -10580,8 +10580,8 @@ var scroll_Scroll = /*#__PURE__*/function () {
     var scrollType = userConfig.scrollType,
         _userConfig$pullingDo = userConfig.pullingDown,
         pullingDown = _userConfig$pullingDo === void 0 ? {
-      threshold: 70,
-      stop: 56,
+      threshold: 40,//dxw edit:stop: 70 --> stop: 40
+      stop: 40,//dxw edit:stop: 56 --> stop: 20
       mouseWheel: true
     } : _userConfig$pullingDo;
     scrollType && (this.scrollType = scrollType);
@@ -10641,7 +10641,7 @@ var scroll_Scroll = /*#__PURE__*/function () {
         'enter': "".concat(ARROW_BOTTOM, " \u4E0B\u62C9"),
         'leave': "".concat(ARROW_UP, " \u5237\u65B0"),
         'fetching': '加载中...',
-        'succeed': '刷新完成'
+        'succeed': '加载完成'//dxw edit 'succeed': '刷新完成' --> 'succeed': '加载完成'
       };
       this.tipText = TEXTS_MAP[phase];
     }
@@ -12082,6 +12082,7 @@ var shopTalk_component = normalizeComponent(
     },
     pullingDownHandler: function pullingDownHandler() {
       this.$emit("loadHistory");
+      this.scroll.finishPullDown();//dxw add
     },
     systemEvent: function systemEvent(itemData) {
       this.$emit("click", {
diff --git a/node_modules/jwchat/lib/JwChat.umd.min.js b/node_modules/jwchat/lib/JwChat.umd.min.js
index 69542f9..a2ac47c 100644
--- a/node_modules/jwchat/lib/JwChat.umd.min.js
+++ b/node_modules/jwchat/lib/JwChat.umd.min.js
@@ -10,4 +10,4 @@
  * (c) 2016-2021 ustbhuangyi
  * Released under the MIT License.
  */
-function te(t){console.error("[BScroll warn]: "+t)}var ee="undefined"!==typeof window,ie=ee&&navigator.userAgent.toLowerCase();ie&&/wechatdevtools/.test(ie),ie&&ie.indexOf("android"),function(){if("string"===typeof ie){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(ie);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();var oe=!1;if(ee){var ne="test-passive";try{var re={};Object.defineProperty(re,"passive",{get:function(){oe=!0}}),window.addEventListener(ne,(function(){}),re)}catch(In){}}var se=function(t,e){for(var i in e)t[i]=e[i];return t},ae=ee&&document.createElement("div").style,ce=function(){if(!ee)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==ae[o.value])return o.key}return!1}();function le(t){return!1===ce?t:"standard"===ce?"transitionEnd"===t?"transitionend":t:ce+t.charAt(0).toUpperCase()+t.substr(1)}function he(t,e,i,o){var n=oe?{passive:!1,capture:!!o}:!!o;t.addEventListener(e,i,n)}function pe(t,e,i,o){t.removeEventListener(e,i,{capture:!!o})}ce&&"standard"!==ce&&ce.toLowerCase();le("transform"),le("transition");function ue(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1}ee&&le("perspective"),le("transitionTimingFunction"),le("transitionDuration"),le("transitionDelay"),le("transformOrigin"),le("transitionEnd"),le("transitionProperty");var de=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(he)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(pe)},t.prototype.handleDOMEvents=function(t){var e=this,i=this.wrapper;this.events.forEach((function(o){t(i,o.name,e,!!o.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(i){return i.name===e&&(i.handler(t),!0)}))},t}(),fe=function(){function t(t){this.scroll=t,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return t.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},t.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel,e={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=se(e,t)},t.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},t.prototype.registerEvent=function(){this.eventRegister=new de(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},t.prototype.registerHooks=function(t,e,i){t.on(e,i,this),this.hooksFn.push([t,e,i])},t.prototype.wheelHandler=function(t){if(this.scroll.enabled){this.beforeHandler(t),this.wheelStart||(this.wheelStartHandler(t),this.wheelStart=!0);var e=this.getWheelDelta(t);this.wheelMoveHandler(e),this.wheelEndDetector(e)}},t.prototype.wheelStartHandler=function(t){this.cleanCache();var e=this.scroll.scroller,i=e.scrollBehaviorX,o=e.scrollBehaviorY;i.setMovingDirection(0),o.setMovingDirection(0),i.setDirection(0),o.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},t.prototype.cleanCache=function(){this.deltaCache=[]},t.prototype.wheelMoveHandler=function(t){var e=this,i=this.mouseWheelOpt,o=i.throttleTime,n=i.dampingFactor;if(o&&this.wheelMoveTimer)this.deltaCache.push(t);else{var r=this.deltaCache.reduce((function(t,e){return{x:t.x+e.x,y:t.y+e.y}}),{x:0,y:0});this.cleanCache();var s=this.scroll.scroller,a=s.scrollBehaviorX,c=s.scrollBehaviorY;a.setMovingDirection(-t.directionX),c.setMovingDirection(-t.directionY),a.setDirection(t.x),c.setDirection(t.y);var l=a.performDampingAlgorithm(Math.round(t.x)+r.x,n),h=c.performDampingAlgorithm(Math.round(t.y)+r.x,n);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:l,y:h})){var p=this.getEaseTime();l===this.scroll.x&&h===this.scroll.y||this.scroll.scrollTo(l,h,p)}o&&(this.wheelMoveTimer=window.setTimeout((function(){e.wheelMoveTimer=0}),o))}},t.prototype.wheelEndDetector=function(t){var e=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout((function(){e.wheelStart=!1,window.clearTimeout(e.wheelMoveTimer),e.wheelMoveTimer=0,e.scroll.trigger(e.scroll.eventTypes.mousewheelEnd,t)}),this.mouseWheelOpt.discreteTime)},t.prototype.getWheelDelta=function(t){var e=this.mouseWheelOpt,i=e.speed,o=e.invert,n=0,r=0,s=o?-1:1;switch(!0){case"deltaX"in t:1===t.deltaMode?(n=-t.deltaX*i,r=-t.deltaY*i):(n=-t.deltaX,r=-t.deltaY);break;case"wheelDeltaX"in t:n=t.wheelDeltaX/120*i,r=t.wheelDeltaY/120*i;break;case"wheelDelta"in t:n=r=t.wheelDelta/120*i;break;case"detail"in t:n=r=-t.detail/3*i;break}n*=s,r*=s,this.scroll.hasVerticalScroll||(Math.abs(r)>Math.abs(n)&&(n=r),r=0),this.scroll.hasHorizontalScroll||(n=0);var a=n>0?-1:n<0?1:0,c=r>0?-1:r<0?1:0;return{x:n,y:r,directionX:a,directionY:c}},t.prototype.beforeHandler=function(t){var e=this.scroll.options,i=e.preventDefault,o=e.stopPropagation,n=e.preventDefaultException;i&&!ue(t.target,n)&&t.preventDefault(),o&&t.stopPropagation()},t.prototype.getEaseTime=function(){var t=100,e=this.mouseWheelOpt.easeTime;return e<t&&te("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(e,t)},t.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach((function(t){var e=t[0],i=t[1],o=t[2];e.off(i,o)}))},t.pluginName="mouseWheel",t.applyOrder="pre",t}(),me=fe,ve=function(){return ve=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},ve.apply(this,arguments)};function ge(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,n++)o[n]=r[s];return o}function ye(t){console.error("[BScroll warn]: "+t)}var be="undefined"!==typeof window,we=be&&navigator.userAgent.toLowerCase();we&&/wechatdevtools/.test(we),we&&we.indexOf("android"),function(){if("string"===typeof we){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(we);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();var xe=!1;if(be){var ke="test-passive";try{var Te={};Object.defineProperty(Te,"passive",{get:function(){xe=!0}}),window.addEventListener(ke,(function(){}),Te)}catch(In){}}function Se(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var qe=function(t,e){for(var i in e)t[i]=e[i];return t};function _e(t,e,i){return t<e?e:t>i?i:t}var Pe=be&&document.createElement("div").style,Ce=function(){if(!be)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==Pe[o.value])return o.key}return!1}();function Ee(t){return!1===Ce?t:"standard"===Ce?"transitionEnd"===t?"transitionend":t:Ce+t.charAt(0).toUpperCase()+t.substr(1)}function Me(t,e,i,o){var n=xe?{passive:!1,capture:!!o}:!!o;t.addEventListener(e,i,n)}function Oe(t,e,i,o){t.removeEventListener(e,i,{capture:!!o})}Ce&&"standard"!==Ce&&Ce.toLowerCase();var Be=Ee("transform"),ze=Ee("transition");be&&Ee("perspective");var Le={transform:Be,transition:ze,transitionTimingFunction:Ee("transitionTimingFunction"),transitionDuration:Ee("transitionDuration"),transitionDelay:Ee("transitionDelay"),transformOrigin:Ee("transformOrigin"),transitionEnd:Ee("transitionEnd"),transitionProperty:Ee("transitionProperty")},De=function(){function t(t){this.events={},this.eventTypes={},this.registerType(t)}return t.prototype.on=function(t,e,i){return void 0===i&&(i=this),this.hasType(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,i]),this},t.prototype.once=function(t,e,i){var o=this;void 0===i&&(i=this),this.hasType(t);var n=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];o.off(t,n);var a=e.apply(i,r);if(!0===a)return a};return n.fn=e,this.on(t,n),this},t.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this.hasType(t),!e)return this.events[t]=[],this;var i=this.events[t];if(!i)return this;var o=i.length;while(o--)(i[o][0]===e||i[o][0]&&i[o][0].fn===e)&&i.splice(o,1);return this}},t.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.hasType(t);var o=this.events[t];if(o)for(var n,r=o.length,s=ge(o),a=0;a<r;a++){var c=s[a],l=c[0],h=c[1];if(l&&(n=l.apply(h,e),!0===n))return n}},t.prototype.registerType=function(t){var e=this;t.forEach((function(t){e.eventTypes[t]=t}))},t.prototype.destroy=function(){this.events={},this.eventTypes={}},t.prototype.hasType=function(t){var e=this.eventTypes,i=e[t]===t;i||ye('EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(e).map((function(t){return JSON.stringify(t)}))+"]")},t}(),je=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(Me)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(Oe)},t.prototype.handleDOMEvents=function(t){var e=this,i=this.wrapper;this.events.forEach((function(o){t(i,o.name,e,!!o.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(i){return i.name===e&&(i.handler(t),!0)}))},t}(),Ae=function(){function t(t,e){this.indicator=t,this.options=e,this.hooks=new De(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return t.prototype.registerEvents=function(){var t=this.options,e=t.disableMouse,i=t.disableTouch,o=[],n=[],r=[];e||(o.push({name:"mousedown",handler:this.start.bind(this)}),n.push({name:"mousemove",handler:this.move.bind(this)}),r.push({name:"mouseup",handler:this.end.bind(this)})),i||(o.push({name:"touchstart",handler:this.start.bind(this)}),n.push({name:"touchmove",handler:this.move.bind(this)}),r.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new je(this.indicator.indicatorEl,o),this.moveEventRegister=new je(window,n),this.endEventRegister=new je(window,r)},t.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},t.prototype.start=function(t){if(!this.BScrollIsDisabled()){var e=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.initiated=!0,this.lastPoint=e[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},t.prototype.move=function(t){if(this.initiated){var e=t.touches?t.touches[0]:t,i=e[this.indicator.keysMap.point];t.preventDefault(),t.stopPropagation();var o=i-this.lastPoint;this.lastPoint=i,this.hooks.trigger(this.hooks.eventTypes.touchMove,o)}},t.prototype.end=function(t){this.initiated&&(this.initiated=!1,t.preventDefault(),t.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},t.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},t}(),He=function(){function t(t,e){this.scroll=t,this.options=e,this.hooksFn=[],this.wrapper=e.wrapper,this.direction=e.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return t.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},t.prototype.handleHooks=function(){var t=this,e=this.options,i=e.fade,o=e.interactive,n=e.scrollbarTrackClickable,r=this.scroll,s=r.hooks,a=r.scroller.translater.hooks,c=r.scroller.animater.hooks;if(this.registerHooks(s,s.eventTypes.refresh,this.refresh),this.registerHooks(a,a.eventTypes.translate,(function(e){var i=t.keysMap.hasScroll;t.scroll[i]&&t.updatePosition(e)})),this.registerHooks(c,c.eventTypes.time,this.transitionTime),this.registerHooks(c,c.eventTypes.timeFunction,this.transitionTimingFunction),i&&(this.registerHooks(r,r.eventTypes.scrollEnd,(function(){t.fade()})),this.registerHooks(r,r.eventTypes.scrollStart,(function(){t.fade(!0)})),r.eventTypes.mousewheelStart&&r.eventTypes.mousewheelEnd&&(this.registerHooks(r,r.eventTypes.mousewheelStart,(function(){t.fade(!0)})),this.registerHooks(r,r.eventTypes.mousewheelMove,(function(){t.fade(!0)})),this.registerHooks(r,r.eventTypes.mousewheelEnd,(function(){t.fade()})))),o){var l=this.scroll.options,h=l.disableMouse,p=l.disableTouch;this.eventHandler=new Ae(this,{disableMouse:h,disableTouch:p});var u=this.eventHandler.hooks;this.registerHooks(u,u.eventTypes.touchStart,this.startHandler),this.registerHooks(u,u.eventTypes.touchMove,this.moveHandler),this.registerHooks(u,u.eventTypes.touchEnd,this.endHandler)}n&&this.bindClick()},t.prototype.registerHooks=function(t,e,i){t.on(e,i,this),this.hooksFn.push([t,e,i])},t.prototype.bindClick=function(){var t=this.wrapper;this.clickEventRegister=new je(t,[{name:"click",handler:this.handleClick.bind(this)}])},t.prototype.handleClick=function(t){var e=this.calculateclickOffsetPos(t),i=this.scroll,o=i.x,n=i.y;o="horizontal"===this.direction?e:o,n="vertical"===this.direction?e:n,this.scroll.scrollTo(o,n,this.options.scrollbarTrackOffsetTime)},t.prototype.calculateclickOffsetPos=function(t){var e=this.keysMap,i=e.point,o=e.domRect,n=this.options.scrollbarTrackOffsetType,r=t[i]-this.wrapperRect[o],s=r<this.currentPos?-1:1,a=0,c=this.currentPos;return"step"===n?a=this.scrollInfo.baseSize*s:(a=0,c=r),this.newPos(c,a,this.scrollInfo)},t.prototype.getKeysMap=function(){return"vertical"===this.direction?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},t.prototype.fade=function(t){var e=this.options,i=e.fadeInTime,o=e.fadeOutTime,n=t?i:o,r=this.wrapper;r.style[Le.transitionDuration]=n+"ms",r.style.opacity=t?"1":"0"},t.prototype.refresh=function(){var t=this.keysMap.hasScroll,e=this.scroll,i=e.x,o=e.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(e[t])){var n=this.keysMap,r=n.wrapperSize,s=n.scrollerSize,a=n.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[r],e[s],e[a],this.indicatorEl[r]),this.updatePosition({x:i,y:o})}},t.prototype.transitionTime=function(t){void 0===t&&(t=0),this.indicatorEl.style[Le.transitionDuration]=t+"ms"},t.prototype.transitionTimingFunction=function(t){this.indicatorEl.style[Le.transitionTimingFunction]=t},t.prototype.canScroll=function(t){return this.wrapper.style.display=t?"block":"none",t},t.prototype.refreshScrollInfo=function(t,e,i,o){var n=Math.max(Math.round(t*t/(e||t||1)),this.options.minSize);this.options.isCustom&&(n=o);var r=t-n,s=r/i;return{baseSize:n,maxScrollPos:r,minScrollPos:0,sizeRatio:s}},t.prototype.updatePosition=function(t){var e=this.caculatePosAndSize(t,this.scrollInfo),i=e.pos,o=e.size;this.refreshStyle(o,i),this.currentPos=i},t.prototype.caculatePosAndSize=function(t,e){var i,o=this.keysMap.pos,n=e.sizeRatio,r=e.baseSize,s=e.maxScrollPos,a=e.minScrollPos,c=this.options.minSize,l=Math.round(n*t[o]);return l<a?(i=Math.max(r+3*l,c),l=a):l>s?(i=Math.max(r-3*(l-s),c),l=s+r-i):i=r,{pos:l,size:i}},t.prototype.refreshStyle=function(t,e){var i=this.keysMap,o=i.translateProperty,n=i.size,r=this.scroll.options.translateZ;this.indicatorEl.style[n]=t+"px",this.indicatorEl.style[Le.transform]=o+"("+e+"px)"+r},t.prototype.startHandler=function(){this.moved=!1,this.startTime=Se(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},t.prototype.moveHandler=function(t){if(this.moved||this.indicatorNotMoved(t)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var e=this.newPos(this.currentPos,t,this.scrollInfo);this.syncBScroll(e)}},t.prototype.endHandler=function(){if(this.moved){var t=this.scroll,e=t.x,i=t.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:e,y:i})}},t.prototype.indicatorNotMoved=function(t){var e=this.currentPos,i=this.scrollInfo,o=i.maxScrollPos,n=i.minScrollPos,r=e===n&&t<=0||e===o&&t>=0;return r},t.prototype.syncBScroll=function(t){var e=Se(),i=this.scroll,o=i.x,n=i.y,r=i.options,s=i.scroller,a=i.maxScrollY,c=i.minScrollY,l=i.maxScrollX,h=i.minScrollX,p=r.probeType,u=r.momentumLimitTime,d={x:o,y:n};"vertical"===this.direction?d.y=_e(t,a,c):d.x=_e(t,l,h),s.translater.translate(d),e-this.startTime>u&&(this.startTime=e,1===p&&s.hooks.trigger(s.hooks.eventTypes.scroll,d)),p>1&&s.hooks.trigger(s.hooks.eventTypes.scroll,d)},t.prototype.newPos=function(t,e,i){var o=i.maxScrollPos,n=i.sizeRatio,r=i.minScrollPos,s=t+e;return s=_e(s,r,o),Math.round(s/n)},t.prototype.destroy=function(){var t=this.options,e=t.interactive,i=t.scrollbarTrackClickable,o=t.isCustom;e&&this.eventHandler.destroy(),i&&this.clickEventRegister.destroy(),o||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach((function(t){var e=t[0],i=t[1],o=t[2];e.off(i,o)})),this.hooksFn.length=0},t}(),Ie=function(){function t(t){this.scroll=t,this.handleOptions(),this.createIndicators(),this.handleHooks()}return t.prototype.handleHooks=function(){var t=this,e=this.scroll;e.hooks.on(e.hooks.eventTypes.destroy,(function(){for(var e=0,i=t.indicators;e<i.length;e++){var o=i[e];o.destroy()}}))},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.scrollbar?{}:this.scroll.options.scrollbar,e={fade:!0,fadeInTime:250,fadeOutTime:500,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300};this.options=qe(e,t)},t.prototype.createIndicators=function(){for(var t,e=this.scroll,i=[],o=["scrollX","scrollY"],n=["horizontal","vertical"],r=this.options.customElements,s=0;s<o.length;s++){var a=o[s];if(e.options[a]){var c=r.shift(),l=n[s],h=!1,p=c||this.createScrollbarElement(l);p!==c?e.wrapper.appendChild(p):h=!0,t=ve(ve({wrapper:p,direction:l},this.options),{isCustom:h}),i.push(new He(e,t))}}this.indicators=i},t.prototype.createScrollbarElement=function(t,e){void 0===e&&(e=this.options.scrollbarTrackClickable);var i=document.createElement("div"),o=document.createElement("div");return i.style.cssText="position:absolute;z-index:9999;overflow:hidden;",o.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",o.className="bscroll-indicator","horizontal"===t?(i.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",o.style.height="100%",i.className="bscroll-horizontal-scrollbar"):(i.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",o.style.width="100%",i.className="bscroll-vertical-scrollbar"),e||(i.style.cssText+="pointer-events:none;"),i.appendChild(o),i},t.pluginName="scrollbar",t}(),Re=Ie,Ye="undefined"!==typeof window,$e=Ye&&navigator.userAgent.toLowerCase();$e&&/wechatdevtools/.test($e),$e&&$e.indexOf("android"),function(){if("string"===typeof $e){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec($e);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();if(Ye){var Xe="test-passive";try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){!0}}),window.addEventListener(Xe,(function(){}),Fe)}catch(In){}}var Ne=Ye&&document.createElement("div").style,We=function(){if(!Ye)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==Ne[o.value])return o.key}return!1}();function Ve(t){return!1===We?t:"standard"===We?"transitionEnd"===t?"transitionend":t:We+t.charAt(0).toUpperCase()+t.substr(1)}We&&"standard"!==We&&We.toLowerCase();Ve("transform"),Ve("transition");function Je(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}Ye&&Ve("perspective"),Ve("transitionTimingFunction"),Ve("transitionDuration"),Ve("transitionDelay"),Ve("transformOrigin"),Ve("transitionEnd"),Ve("transitionProperty");var Ue=function(){function t(t){this.scroll=t,this.stopObserver=!1,this.init()}return t.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},t.prototype.handleMutationObserver=function(){var t=this;if("undefined"!==typeof MutationObserver){var e=0;this.observer=new MutationObserver((function(i){t.mutationObserverHandler(i,e)})),this.startObserve(this.observer)}else this.checkDOMUpdate()},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){t.stopObserve(),t.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,(function(){t.stopObserver&&t.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,(function(){t.stopObserve()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,(function(){t.destroy()}))},t.prototype.mutationObserverHandler=function(t,e){var i=this;if(!this.shouldNotRefresh()){for(var o=!1,n=!1,r=0;r<t.length;r++){var s=t[r];if("attributes"!==s.type){o=!0;break}if(s.target!==this.scroll.scroller.content){n=!0;break}}o?this.scroll.refresh():n&&(clearTimeout(e),e=window.setTimeout((function(){i.shouldNotRefresh()||i.scroll.refresh()}),60))}},t.prototype.startObserve=function(t){var e={attributes:!0,childList:!0,subtree:!0};t.observe(this.scroll.scroller.content,e)},t.prototype.shouldNotRefresh=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,i=t.scrollBehaviorY,o=e.currentPos>e.minScrollPos||e.currentPos<e.maxScrollPos||i.currentPos>i.minScrollPos||i.currentPos<i.maxScrollPos;return t.animater.pending||o},t.prototype.checkDOMUpdate=function(){var t=this,e=this.scroll.scroller.content,i=Je(e),o=i.width,n=i.height,r=function(){if(!t.stopObserver){i=Je(e);var r=i.width,a=i.height;o===r&&n===a||t.scroll.refresh(),o=r,n=a,s()}},s=function(){setTimeout((function(){r()}),1e3)};s()},t.prototype.registerHooks=function(t,e,i){t.on(e,i,this),this.hooksFn.push([t,e,i])},t.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},t.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach((function(t){var e=t[0],i=t[1],o=t[2];e.off(i,o)})),this.hooksFn.length=0},t.pluginName="observeDOM",t}(),Ke=Ue,Ge="undefined"!==typeof window,Qe=Ge&&navigator.userAgent.toLowerCase();Qe&&/wechatdevtools/.test(Qe),Qe&&Qe.indexOf("android"),function(){if("string"===typeof Qe){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(Qe);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();var Ze=!1;if(Ge){var ti="test-passive";try{var ei={};Object.defineProperty(ei,"passive",{get:function(){Ze=!0}}),window.addEventListener(ti,(function(){}),ei)}catch(In){}}var ii=function(t,e){for(var i in e)t[i]=e[i];return t},oi=Ge&&document.createElement("div").style,ni=function(){if(!Ge)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==oi[o.value])return o.key}return!1}();function ri(t){return!1===ni?t:"standard"===ni?"transitionEnd"===t?"transitionend":t:ni+t.charAt(0).toUpperCase()+t.substr(1)}function si(t,e,i,o){var n=Ze?{passive:!1,capture:!!o}:!!o;t.addEventListener(e,i,n)}function ai(t,e,i,o){t.removeEventListener(e,i,{capture:!!o})}ni&&"standard"!==ni&&ni.toLowerCase();ri("transform"),ri("transition");Ge&&ri("perspective"),ri("transitionTimingFunction"),ri("transitionDuration"),ri("transitionDelay"),ri("transformOrigin"),ri("transitionEnd"),ri("transitionProperty");var ci=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(si)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(ai)},t.prototype.handleDOMEvents=function(t){var e=this,i=this.wrapper;this.events.forEach((function(o){t(i,o.name,e,!!o.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(i){return i.name===e&&(i.handler(t),!0)}))},t}(),li=function(t){return"img"===t.tagName.toLowerCase()},hi=function(){function t(t){this.scroll=t,this.refreshTimer=0,this.init()}return t.prototype.init=function(){this.handleOptions(this.scroll.options.observeImage),this.bindEventsToWrapper()},t.prototype.handleOptions=function(t){void 0===t&&(t={}),t=!0===t?{}:t;var e={debounceTime:100};this.options=ii(e,t)},t.prototype.bindEventsToWrapper=function(){var t=this.scroll.scroller.wrapper;this.imageLoadEventRegister=new ci(t,[{name:"load",handler:this.load.bind(this),capture:!0}]),this.imageErrorEventRegister=new ci(t,[{name:"error",handler:this.load.bind(this),capture:!0}])},t.prototype.load=function(t){var e=this,i=t.target,o=this.options.debounceTime;i&&li(i)&&(0===o?this.scroll.refresh():(clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout((function(){e.scroll.refresh()}),this.options.debounceTime)))},t.pluginName="observeImage",t}(),pi=hi,ui="undefined"!==typeof window,di=ui&&navigator.userAgent.toLowerCase();di&&/wechatdevtools/.test(di),di&&di.indexOf("android"),function(){if("string"===typeof di){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(di);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();if(ui){var fi="test-passive";try{var mi={};Object.defineProperty(mi,"passive",{get:function(){!0}}),window.addEventListener(fi,(function(){}),mi)}catch(In){}}var vi=function(t,e){for(var i in e)t[i]=e[i];return t},gi=ui&&document.createElement("div").style,yi=function(){if(!ui)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==gi[o.value])return o.key}return!1}();function bi(t){return!1===yi?t:"standard"===yi?"transitionEnd"===t?"transitionend":t:yi+t.charAt(0).toUpperCase()+t.substr(1)}yi&&"standard"!==yi&&yi.toLowerCase();bi("transform"),bi("transition");ui&&bi("perspective"),bi("transitionTimingFunction"),bi("transitionDuration"),bi("transitionDelay"),bi("transformOrigin"),bi("transitionEnd"),bi("transitionProperty");var wi={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}}},xi="plugins.pullDownRefresh",ki=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}],Ti=ki.map((function(t){return{key:t.key,sourceKey:xi+"."+t.name}})),Si="pullingDown",qi="enterThreshold",_i="leaveThreshold",Pi=function(){function t(t){this.scroll=t,this.pulling=0,this.thresholdBoundary=0,this.init()}return t.prototype.setPulling=function(t){this.pulling=t},t.prototype.setThresholdBoundary=function(t){this.thresholdBoundary=t},t.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},t.prototype.handleBScroll=function(){this.scroll.registerType([Si,qi,_i]),this.scroll.proxy(Ti)},t.prototype.handleOptions=function(t){void 0===t&&(t={}),t=!0===t?{}:t;var e={threshold:90,stop:40};this.options=vi(e,t),this.scroll.options.probeType=3},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[];var e=this.scroll.scroller,i=e.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=i.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){t.finishPullDown()})),this.registerHooks(i.hooks,i.hooks.eventTypes.computeBoundary,(function(e){e.maxScrollPos>0&&(e.maxScrollPos=-1),e.minScrollPos=t.currentMinScrollY})),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,(function(t){var e=300,i=350;t.discreteTime=e,t.easeTime=i})),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,(function(){e.hooks.trigger(e.hooks.eventTypes.end)})))},t.prototype.registerHooks=function(t,e,i){t.on(e,i,this),this.hooksFn.push([t,e,i])},t.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},t.prototype.watch=function(){var t=this.scroll.scroller;this.watching=!0,this.registerHooks(t.hooks,t.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},t.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(1),this.setThresholdBoundary(0))},t.prototype.checkLocationOfThresholdBoundary=function(){if(1===this.pulling){var t=this.scroll,e=1!==this.thresholdBoundary&&this.locateInsideThresholdBoundary(),i=2!==this.thresholdBoundary&&!this.locateInsideThresholdBoundary();e&&(this.setThresholdBoundary(1),t.trigger(qi)),i&&(this.setThresholdBoundary(2),t.trigger(_i))}},t.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},t.prototype.unwatch=function(){var t=this.scroll,e=t.scroller;this.watching=!1,e.hooks.off(e.hooks.eventTypes.end,this.checkPullDown),t.off(t.eventTypes.scrollStart,this.resetStateBeforeScrollStart),t.off(t.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&t.off(t.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},t.prototype.checkPullDown=function(){var t=this.options,e=t.threshold,i=t.stop;return!(this.scroll.y<e)&&(1===this.pulling&&(this.modifyBehaviorYBoundary(i),this.setPulling(2),this.scroll.trigger(Si)),this.scroll.scrollTo(this.scroll.x,i,this.scroll.options.bounceTime,wi.bounce),this.isFetchingStatus())},t.prototype.isFetchingStatus=function(){return 2===this.pulling},t.prototype.modifyBehaviorYBoundary=function(t){var e=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=e.minScrollPos,this.currentMinScrollY=t,e.computeBoundary()},t.prototype.finishPullDown=function(){if(this.isFetchingStatus()){var t=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,t.computeBoundary(),this.setPulling(0),this.scroll.resetPosition(this.scroll.options.bounceTime,wi.bounce)}},t.prototype.openPullDown=function(t){void 0===t&&(t={}),this.handleOptions(t),this.watching||this.watch()},t.prototype.closePullDown=function(){this.unwatch()},t.prototype.autoPullDownRefresh=function(){var t=this.options,e=t.threshold,i=t.stop;!this.isFetchingStatus()&&this.watching&&(this.modifyBehaviorYBoundary(i),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,e),this.setPulling(2),this.scroll.trigger(Si),this.scroll.scrollTo(this.scroll.x,i,this.scroll.options.bounceTime,wi.bounce))},t.pluginName="pullDownRefresh",t}(),Ci=Pi;Zt.use(me),Zt.use(Re),Zt.use(Ke),Zt.use(pi),Zt.use(Ci);var Ei={moving:{enter:"enter",leave:"leave"},fetching:"fetching",succeed:"succeed"},Mi=function(){function t(e){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(this,t),_(this,"domPotision",[]),_(this,"beforeNode",null),_(this,"viewName",null),_(this,"tipText",""),_(this,"scrollType",""),_(this,"isLoding",!1),_(this,"saveNodes",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.nodes,o=void 0===e?[]:e,n=t.dataList,r=[],s=i.domPotision;for(var a in o)Object.hasOwnProperty.call(o,a)&&function(){var t=o[a],e=JSON.stringify(n[a]),i=t.offsetTop,c={top:i,node:t,read:!1,data:e},l=s.findIndex((function(t){return t.data===e}));if("number"===typeof l&&l>-1){var h=s[l]||{},p=h.read,u=void 0!==p&&p;c.read=u}r.push(c)}();i.domPotision=r,i.readState()}));var n=o.scrollType,r=o.pullingDown,s=void 0===r?{threshold:70,stop:56,mouseWheel:!0}:r;n&&(this.scrollType=n),this.viewName=e;var a=new Zt(e,{scrollY:!0,click:!0,probeType:3,observeDOM:!0,mouseWheel:!0,observeImage:!0,scrollbar:{fade:!1,interactive:!0,scrollbarTrackClickable:!0},pullDownRefresh:s,preventDefault:!1});a.on("scrollEnd",(function(){i.setLoding(!1),i.savePosition()})),s&&(a.on("enterThreshold",(function(){i.setLoding(!0),i.setTipText(Ei.moving.enter)})),a.on("leaveThreshold",(function(){i.setTipText(Ei.moving.leave)}))),this.Scroll=a}return q(t,[{key:"refresh",value:function(){this.Scroll.refresh()}},{key:"setTipText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei.default,e='<svg width="16" height="16" viewBox="0 0 512 512"><path fill="currentColor" d="M367.997 338.75l-95.998 95.997V17.503h-32v417.242l-95.996-95.995l-22.627 22.627L256 496l134.624-134.623l-22.627-22.627z"></path></svg>',i='<svg width="16" height="16" viewBox="0 0 512 512"><path fill="currentColor" d="M390.624 150.625L256 16L121.376 150.625l22.628 22.627l95.997-95.998v417.982h32V77.257l95.995 95.995l22.628-22.627z"></path></svg>',o={enter:"".concat(e," 下拉"),leave:"".concat(i," 刷新"),fetching:"加载中...",succeed:"刷新完成"};this.tipText=o[t]}},{key:"finishPullDown",value:function(){this.setTipText(Ei.succeed),this.Scroll.finishPullDown()}},{key:"setLoding",value:function(t){this.isLoding=t}},{key:"pullingDownHandler",value:function(){this.savePosition(0),this.setTipText(Ei.fetching)}},{key:"on",value:function(t,e){var i=this;this.Scroll.on(t,(function(){"pullingDown"===t&&i.pullingDownHandler(),e()}))}},{key:"unread",get:function(){var t=0;return this.domPotision.forEach((function(e){var i=e.read;i||(t+=1)})),t}},{key:"readState",value:function(){var t=this,e=this.Scroll.y,i=Math.abs(e),o=this.viewName.clientHeight||0,n=-1;this.beforeNode&&(n=this.domPotision.findIndex((function(e){return e.data===t.beforeNode.data}))),this.domPotision.forEach((function(t,e){var r=t.top,s=t.node,a=s.clientHeight;(i+o>r+.9*a||n>e)&&(t.read=!0)}))}},{key:"isBottom",get:function(){var t=!1,e=this.Scroll,i=e.y,o=e.maxScrollY;return t=Math.abs(i)>=Math.abs(o),t}},{key:"scrollBottom",value:function(){this.Scroll.scrollTo(0,this.Scroll.maxScrollY,200)}},{key:"scrollPositionDom",value:function(){var t=this.Scroll.y;if(t>=0)return 0;var e=Math.abs(t),i=this.domPotision,o=-1;return i.forEach((function(t,i){var n=t.top;-1===o&&(o=i),e>=n&&(o=i+1)})),o}},{key:"savePosition",value:function(){var t=this.scrollPositionDom();this.beforeNode=this.domPotision[t]}}]),t}(),Oi=Mi,Bi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"item_msg",on:{click:t.itemCallback}},["span"===t.getTag?i("span",{domProps:{innerHTML:t._s(t.parseText())}}):t._e(),"img"===t.getTag?i("img",{staticClass:"web__msg--img",attrs:{src:t.getData.src,alt:""},on:{click:function(e){return t.showDialog({tag:"img"})},load:function(e){return t.load("img")}}}):t._e(),"video"===t.getTag?i("video",{staticClass:"web__msg--video",attrs:{src:t.getData.src,controls:"controls"},on:{click:function(e){return t.showDialog({tag:"video"})},canplaythrough:function(e){return t.load("video")}}}):t._e(),"audio"===t.getTag?i("audio",{staticClass:"web__msg--audio",staticStyle:{width:"20rem",height:"20px"},attrs:{src:t.getData.src,controls:"controls"},on:{canplaythrough:function(e){return t.load("audio")}}}):t._e(),["video","img"].includes(t.getTag)?i("el-dialog",{staticClass:"web__dialog",attrs:{visible:t.show,width:"40%","append-to-body":"","before-close":t.handleClose},on:{"update:visible":function(e){t.show=e}}},[t.imgSrc?i("img",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.imgSrc}}):t._e(),t.videoSrc?i("video",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.videoSrc,controls:"controls"}}):t._e(),t.audioSrc?i("audio",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.audioSrc,controls:"controls"}}):t._e()]):t._e()],1)},zi=[];i("5319"),i("1276"),i("caad"),i("2532");function Li(t){return Li="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Li(t)}function Di(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ji(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ai(t,e,i){return e&&ji(t.prototype,e),i&&ji(t,i),t}var Hi=function(){function t(e){Di(this,t),this.tier=0,this.empty=1,this.index=0,this.children={},e&&this.build(e)}return Ai(t,[{key:"build",value:function(t){for(var e=t.length,i=0;i<e;i++)this.insert(t[i],0,i)}},{key:"insert",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;if(0!==e.length){var n,r,s=this;i!==e.length?(n=e[i],void 0===s.children[n]&&(s.children[n]=new t,s.empty=0,s.children[n].tier=this.tier+1),r=s.children[n],r.insert(e,i+1,o)):s.index=o}}},{key:"searchOne",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i={};if(0===t.length)return i;var o,n,r=this;return i.arr=[],n=t[e],o=r.children[n],void 0!==o&&e<t.length?o.searchOne(t,e+1):void 0===o&&0===r.empty?i:1==r.empty?(i.arr[0]=e-r.tier,i.arr[1]=r.index,i.tier=r.tier,i):i}},{key:"search",value:function(t){if(1==this.empty)return[];for(var e,i=t.length,o=[],n=0;n<i-1;n++)e=this.searchOne(t,n),"undefined"!==typeof e.arr&&e.arr.length>0&&(o.push(e.arr),n=n+e.tier-1);return o}}]),t}(),Ii={"/::)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/0.gif","/::~":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/1.gif","/::B":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/2.gif","/::|":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/3.gif","/:8-)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/4.gif","/::<":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/5.gif","/::$":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/6.gif","/::X":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/7.gif","/::Z":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/8.gif","/::'(":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/9.gif","/::-|":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/10.gif","/::@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/11.gif","/::P":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/12.gif","/::D":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/13.gif","/::O":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/14.gif","/::(":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/15.gif","/::+":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/16.gif","/:--b":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/17.gif","/::Q":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/18.gif","/::T":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/19.gif","/:,@P":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/20.gif","/:,@-D":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/21.gif","/::d":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/22.gif","/:,@o":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/23.gif","/::g":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/24.gif","/:|-)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/25.gif","/::!":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/26.gif","/::L":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/27.gif","/::>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/28.gif","/::,@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/29.gif","/:,@f":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/30.gif","/::-S":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/31.gif","/:?":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/32.gif","/:,@x":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/33.gif","/:,@@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/34.gif","/::8":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/35.gif","/:,@!":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/36.gif","/:!!!":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/37.gif","/:xx":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/38.gif","/:bye":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/39.gif","/:wipe":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/40.gif","/:dig":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/41.gif","/:handclap":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/42.gif","/:&-(":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/43.gif","/:B-)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/44.gif","/:<@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/45.gif","/:@>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/46.gif","/::-O":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/47.gif","/:>-|":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/48.gif","/:P-(":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/49.gif","/::'|":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/50.gif","/:X-)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/51.gif","/::*":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/52.gif","/:@x":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/53.gif","/:8*":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/54.gif","/:pd":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/55.gif","/:<W>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/56.gif","/:beer":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/57.gif","/:basketb":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/58.gif","/:oo":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/59.gif","/:coffee":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/60.gif","/:eat":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/61.gif","/:pig":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/62.gif","/:rose":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/63.gif","/:fade":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/64.gif","/:showlove":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/65.gif","/:heart":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/66.gif","/:break":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/67.gif","/:cake":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/68.gif","/:li":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/69.gif","/:bome":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/70.gif","/:kn":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/71.gif","/:footb":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/72.gif","/:ladybug":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/73.gif","/:shit":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/74.gif","/:moon":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/75.gif","/:sun":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/76.gif","/:gift":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/77.gif","/:hug":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/78.gif","/:strong":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/79.gif","/:weak":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/80.gif","/:share":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/81.gif","/:v":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/82.gif","/:@)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/83.gif","/:jj":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/84.gif","/:@@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/85.gif","/:bad":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/86.gif","/:lvu":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/87.gif","/:no":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/88.gif","/:ok":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/89.gif","/:love":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/90.gif","/:<L>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/91.gif","/:jump":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/92.gif","/:shake":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/93.gif","/:<O>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/94.gif","/:circle":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/95.gif","/:kotow":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/96.gif","/:turn":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/97.gif","/:skip":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/98.gif","/:oY":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/99.gif",":smile:":{panel:"b5bd1fe0",position:{col:11,row:3}},":mask:":{panel:"b5bd1fe0",position:{col:4,row:1}},":joy:":{panel:"b5bd1fe0",position:{col:11,row:2}},":stuck_out_tongue_closed_eyes:":{panel:"b5bd1fe0",position:{col:1,row:4}},":flushed:":{panel:"b5bd1fe0",position:{col:11,row:8}},":scream:":{panel:"b5bd1fe0",position:{col:11,row:7}},":pensive:":{panel:"b5bd1fe0",position:{col:11,row:5}},":unamused:":{panel:"b5bd1fe0",position:{col:11,row:4}},"[Hey]":{panel:"b5bd1fe0",position:{col:8,row:7}},"[Smirk]":{panel:"b5bd1fe0",position:{col:2,row:1}},"[Smart]":{panel:"b5bd1fe0",position:{col:2,row:2}},"[Concerned]":{panel:"b5bd1fe0",position:{col:1,row:3}},"[Yeah!]":{panel:"b5bd1fe0",position:{col:3,row:2}},":ghost:":{panel:"b5bd1fe0",position:{col:10,row:10}},":pray:":{panel:"b5bd1fe0",position:{col:11,row:9}},":muscle:":{panel:"b5bd1fe0",position:{col:11,row:1}},":tada:":{panel:"b5bd1fe0",position:{col:9,row:10}},":gift:":{panel:"b5bd1fe0",position:{col:8,row:10}},"[Packet]":{panel:"b5bd1fe0",position:{col:3,row:1}},"[好的]":{panel:"b5bd1fe0",position:{col:7,row:5}},"[加油]":{panel:"b5bd1fe0",position:{col:4,row:6}},"[汗]":{panel:"b5bd1fe0",position:{col:5,row:6}},"[天啊]":{panel:"b5bd1fe0",position:{col:6,row:6}},"[Emm]":{panel:"b5bd1fe0",position:{col:7,row:1}},"[社会社会]":{panel:"b5bd1fe0",position:{col:7,row:2}},"[旺柴]":{panel:"b5bd1fe0",position:{col:7,row:3}},"[加油加油]":{panel:"b5bd1fe0",position:{col:4,row:6}},"[吃瓜]":{panel:"b5bd1fe0",position:{col:3,row:6}},"[Facepalm]":{panel:"b5bd1fe0",position:{col:1,row:2}},"[哇]":{panel:"b5bd1fe0",position:{col:1,row:7}},"[打脸]":{panel:"b5bd1fe0",position:{col:7,row:6}},"[囧]":{panel:"b5bd1fe0",position:{col:5,row:1}}},Ri={url:"https://res.wx.qq.com/wxdoc/dist/assets/img/emoji-sprite.b5bd1fe0.png",width:724,height:658,col:11,row:10,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,gapCol:6,gapRow:6},Yi={b5bd1fe0:Ri,"6AfH8":{url:"https://res.wx.qq.com/a/wx_fed/webwx/res/static/img/6AfH8-r.png",width:480,height:380,col:15,row:12,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,gapCol:6,gapRow:6}},$i=Object.keys(Ii),Xi=new Hi($i),Fi=24,Ni=24,Wi={};function Vi(t,e,i,o){return t.slice(0,e)+o+t.slice(e+i)}function Ji(t,e){var i=e.url,o=e.width,n=(e.height,e.col),r=(e.row,e.paddingTop,e.paddingBottom,e.paddingLeft),s=e.paddingRight,a=e.gapCol;e.gapRow;if(!i)return"";var c=(o-r-s-a*(n-1))/n,l=Fi/c,h=o*l;return Wi[t]={scale:l,bgWidth:h},Wi[t]}function Ui(t,e,i){var o=Yi[i],n=o.url,r=o.gapCol,s=o.gapRow;if(!n)return"";var a=Wi[i]||Ji(i,o),c=a.scale,l=a.bgWidth;if("object"===Li(e)){var h=e,p=h.col,u=h.row,d=-(p-1)*(Fi+c*r),f=-(u-1)*(Ni+c*s);e="".concat(d,"px ").concat(f,"px")}return'<a title="'.concat(t,'" style="display: inline-block;background: url(').concat(n,") no-repeat;width: ").concat(Fi,"px;\n    height: ").concat(Ni,"px; background-position:").concat(e,"; background-size: ").concat(l,'px;"></a>')}function Ki(t){var e=Xi.search(t);return e.reverse().map((function(e){var i=e[0],o=$i[e[1]],n=Ii[o],r="object"===Li(n)?Ui(o,n.position,n.panel):-1!==n.indexOf("http")?'<img src="'+n+'" alt="'+o+'">':n;t=Vi(t,i,o.length,r)})),t}var Gi=Ki,Qi={props:{text:String},data:function(){return{tags:["img","video","audio"],show:!1,imgSrc:"",videoSrc:"",audioSrc:"",loadState:!1}},computed:{getTag:function(){var t=this.text||"",e="span",i="";return t.match(/<\/?[^>]+>/)&&(i=t.split(" ")[0].replace(/<|>/,"")||"",this.tags.includes(i)&&(e=i)),e},getData:function(){var t=this.text||"",e=document.createElement("div");e.innerHTML=t;var i=e.firstChild,o=i.getAttribute("data-src"),n=i.getAttribute("controls")||!1;return{src:o,controls:n}}},methods:{load:function(t){this.loadState||(this.loadState=!0,this.$emit("loadDone",{type:t,target:this.text}))},handleClose:function(t){this.imgSrc=void 0,this.videoSrc=void 0,this.audioSrc=void 0,t()},showDialog:function(t){var e=this,i=t.tag,o=this.getData.src,n=function(){"img"===i?(e.imgSrc=o,e.show=!0):"video"===i?(e.videoSrc=o,e.show=!0):"audio"===i?(e.audioSrc=o,e.show=!0):"FILE"===i&&window.open(o)};"function"===typeof this.beforeOpen?this.beforeOpen({tag:i,src:o},n):n()},itemCallback:function(){this.$emit("systemEvent",this.text)},parseText:function(){var t=this.text;if(t){t=t.replace(/\n/g,"<br/>");var e=Gi(t).replace(/<img src/g,'<img data-class="iconBox" src');return e=e.replace("https://res.wx.qq.com/wxdoc/dist/assets/img/emoji-sprite.b5bd1fe0.png","https://codegi.gitee.io/chat/emoji-sprite.png"),e}}},mounted:function(){var t=this,e=this.getTag;this.tags.includes(e)||this.$nextTick((function(){t.$emit("loadDone",{type:e,target:t.text})}))}},Zi=Qi,to=(i("2e58"),u(Zi,Bi,zi,!1,null,"3af7478a",null)),eo=to.exports,io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"systemTalk"},[i("div",{staticClass:"title"},[t._v(t._s(t.text.title))]),i("div",{staticClass:"subtitle"},[t._v(t._s(t.text.subtitle))]),t._l(t.text.content,(function(e){return i("div",{key:JSON.stringify(e)},[i("el-link",{attrs:{type:"primary"},on:{click:function(i){return i.stopPropagation(),t.itemCallback(e)}}},[t._v(t._s(e.text))])],1)}))],2)},oo=[],no={props:{text:{type:Object,default:function(){return{}}}},methods:{itemCallback:function(t){this.$emit("systemEvent",t)}},mounted:function(){var t=this;this.$nextTick((function(){t.$emit("loadDone",{type:"system",target:t.text})}))}},ro=no,so=(i("0605"),u(ro,io,oo,!1,null,"4e632b34",null)),ao=so.exports,co=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shopTalk",on:{click:t.itemCallback}},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.text.cover,alt:""}})]),i("div",{staticClass:"price"},[t._v(" "+t._s(t.text.price))]),i("div",{staticClass:"title"},[t._v(t._s(t.text.title))]),t.text.describe?i("div",{staticClass:"subtitle"},[t._v(t._s(t.text.describe))]):t._e(),t.text.tags&&t.text.tags.length?i("div",{staticClass:"tagBox"},t._l(t.text.tags,(function(e,o){return i("span",{key:o},[t._v(" "+t._s(e.name)+" ")])})),0):t._e()])},lo=[];i("b64b"),i("4de4"),i("e439"),i("dbb4");function ho(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function po(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ho(Object(i),!0).forEach((function(e){_(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ho(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var uo={props:{text:{type:Object,default:function(){return{}}}},methods:{itemCallback:function(){this.$emit("systemEvent",po(po({},this.text),{},{type:"shop"}))}},mounted:function(){var t=this;this.$nextTick((function(){t.$emit("loadDone",{type:"shop",target:t.text})}))}},fo=uo,mo=(i("b10c"),u(fo,co,lo,!1,null,"8d5a38ae",null)),vo=mo.exports,go={name:"JwChat_list",components:{itemTalk:eo,systemTalk:ao,shopTalk:vo},props:{list:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{}}}},data:function(){return{scroll:null,stopScroll:!1}},computed:{boxSize:function(){var t=this.config||{},e=t.height,i=void 0===e?"382px":e,o=t.width,n=void 0===o?"525px":o;return"".concat(i).match(/\d$/)&&(i+="px"),"".concat(n).match(/\d$/)&&(n+="px"),{height:i,width:n}},historyConfig:function(){var t=this.config.historyConfig||{},e=t.tip,i=void 0===e?"":e,o=t.show,n=void 0!==o&&o,r=this.scroll||{},s=r.tipText;return{tip:i||s,show:n}},scrollType:function(){var t=this.config.scrollType,e=void 0===t?"noroll":t;return e},unread:function(){var t=this.scroll||{},e=t.unread,i=void 0===e?0:e;return i},showDownBtn:function(){return!!this.scroll&&!this.scroll.isBottom}},watch:{boxSize:function(){this.scroll.refresh()}},methods:{loadDone:function(){"scroll"==this.scrollType&&this.scrollBottom()},scrollBottom:function(){this.scroll&&(this.scroll.isLoding||(this.scroll.refresh(),this.scroll.scrollBottom()))},createScroll:function(){var t=this.historyConfig||{},e=t.show,i=void 0!==e&&e;this.scroll=new Oi(this.$refs.scroller,{scrollType:this.scrollType,pullingDown:i}),this.scroll.on("refresh",this.childnodeLoad),i&&this.scroll.on("pullingDown",this.pullingDownHandler)},finishPullDown:function(){this.scroll.finishPullDown()},childnodeLoad:function(){if("noroll"===this.scrollType){var t=this.$refs.main;if(t){var e=k(t.children),i=e.slice(1);this.scroll.saveNodes({nodes:i,dataList:this.list})}}},pullingDownHandler:function(){this.$emit("loadHistory")},systemEvent:function(t){this.$emit("click",{type:"systemItem",data:t})},taskEvent:function(t){this.$emit("click",{type:"taskItem",data:t})}},mounted:function(){this.createScroll()}},yo=go,bo=(i("1bb7"),u(yo,m,v,!1,null,"0f64dad9",null)),wo=bo.exports,xo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"toolsBox"},[t.showEmoji?[i("el-popover",{ref:"popover",attrs:{placement:"top-start",trigger:"click"}},[i("ul",{staticClass:"emjioBox"},t._l(Object.keys(t.emoji),(function(e){return i("li",{key:e,on:{click:function(i){return t.selectEmit(e)}}},[t.emoji[e]&&t.emoji[e].position?i("a",{style:t.emojiStyle(e)}):t.emoji[e].length<5?i("a",[t._v(t._s(t.emoji[e]))]):i("img",{attrs:{src:t.emoji[e]}})])})),0),i("JwChat-icon",{staticClass:"toolIcon",attrs:{slot:"reference",type:"icon-xiaolian",title:"表情"},slot:"reference"})],1)]:t._e(),t._l(t.showkeys,(function(e,o){return[t.toolConfig[e]?i("span",{key:e},[i("span",{on:{click:function(i){return t.bindButton(e)}}},[i("JwChat-icon",{staticClass:"toolIcon",attrs:{type:t.toolConfig[e].icon,title:t.iconTitle(e,o)}})],1)]):i("i",{key:e,class:e,on:{click:function(i){return t.bindButton(e)}}})]})),t._t("tools")],2)},ko=[],To=i("d11e"),So={name:"JwChat-tools",props:{tools:{type:Object,default:function(){return{show:["file"],showEmoji:!0,callback:function(){}}}}},data:function(){return{emoji:To,toolConfig:{file:{icon:"icon-wenjian",title:"文件"},video:{icon:"icon-shipin",title:"视频"},img:{icon:"icon-xiangce",title:"图片"},hongbao:{icon:"icon-hongbao",title:"红包"},history:{icon:"icon-lishi",title:"历史"},more:{icon:"icon-gengduo",title:"更多"}},newTitle:null}},computed:{showEmoji:function(){var t=this.tools||{},e=t.showEmoji,i=void 0===e||e;return i},showkeys:function(){var t=this,e=Object.keys(this.toolConfig),i=this.tools||{},o=i.show,n=void 0===o?[]:o,r=[];return n.length>0&&n.forEach((function(i){Array.isArray(i)?t.newTitle=i:e.includes(i)&&r.push(i)})),r}},methods:{iconTitle:function(t,e){var i="";return this.newTitle&&(i=this.newTitle[e]||""),i||(i=this.toolConfig[t].title),i},selectEmit:function(t){this.$emit("emoji",t),this.$refs.popover.doClose()},bindButton:function(t){if(!this.tools.callback)return console.warn("callback not find");"file"===t?this.openFile(t,this.tools.callback):this.tools.callback(t)},openFile:function(t,e){var i=document.createElement("input");i.type="file",i.multiple="multiple",i.click(),i.onchange=function(){var o=i.files;e(t,o)}},emojiStyle:function(t){var e=this.emoji[t];return e?{display:"inline-block",background:"url('https://res.wx.qq.com/a/wx_fed/webwx/res/static/img/6AfH8-r.png')  no-repeat",width:"28px",height:"28px","background-position":e.position}:{}}}},qo=So,_o=(i("bca3"),u(qo,xo,ko,!1,null,"b4bb0df6",null)),Po=_o.exports,Co=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showList.length?i("div",{ref:"quickListBox",staticClass:"quickListBox"},[i("div",{staticClass:"quickList"},t._l(t.showList,(function(e,o){return i("div",{key:o,staticClass:"quickItem"},[i("span",{domProps:{innerHTML:t._s(e.showtext)}}),i("i",{staticClass:"enterBtn el-icon-circle-check",attrs:{title:"选择"},on:{click:function(i){return t.submit(e)}}})])})),0)]):t._e()},Eo=[],Mo=(i("4d63"),i("25f0"),{components:{},data:function(){return{scroll:null,complete:null}},props:{list:{type:Array,default:function(){return[]}},msg:{type:String,default:""}},computed:{showList:function(){var t=this.msg;if(!t)return[];var e=this.list,i=new RegExp(t),o=[];return e.forEach((function(e){var n=e.text;if(i.test(n)){var r=n.replace(i,"<b>".concat(t,"</b>"));o.push(po(po({},e),{},{showtext:r}))}})),o}},methods:{submit:function(t){this.$emit("submit",t)}}}),Oo=Mo,Bo=(i("64b2"),u(Oo,Co,Eo,!1,null,"52dec552",null)),zo=Bo.exports,Lo={name:"JwChat",components:{EnterBox:f,chatList:wo,tools:Po,quickList:zo},props:{taleList:{type:Array,default:function(){return[]}},height:{default:"500px"},width:{default:"550px"},value:{default:""},scrollType:{default:""},toolConfig:{type:Object},config:{},quickList:{type:Array,default:function(){return[]}},placeholder:{type:String}},data:function(){return{msg:"",insert:""}},watch:{value:{handler:function(){this.msg=this.value},immediate:!0},msg:{handler:function(){this.$emit("input",this.msg)},immediate:!0}},computed:{talkHeight:function(){var t=this.height;return"".concat(t).match(/\d$/)?t-=160:t="calc(".concat(t," - 160px)"),t},chatListConfig:function(){var t=this.width,e=this.talkHeight,i=this.scrollType,o=this.config;o=void 0===o?{}:o;var n=o.historyConfig,r=void 0===n?{}:n;return{width:t,height:e,scrollType:i,historyConfig:r}}},methods:{bindEmoji:function(t){var e=this;this.insert=t,this.$nextTick((function(){e.insert=""}))},loadHistoryHandler:function(){var t=this.chatListConfig.historyConfig;t=void 0===t?{}:t;var e=t.callback,i=void 0===e?null:e;i&&i()},quickSubmit:function(t){var e=this,i=t.text;this.msg=i,this.$nextTick((function(){e.$emit("enter",t),e.msg=""}))},finishPullDown:function(){this.$refs.chatList.finishPullDown()}}},Do=Lo,jo=(i("e35f"),u(Do,s,a,!1,null,"f150358a",null)),Ao=jo.exports;Ao.install=function(t){t.component(Ao.name,Ao)};var Ho=Ao,Io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ChatPage",style:{width:t.width,height:t.height}},["{}"!==JSON.stringify(t.winBarConfig)?i("div",{staticClass:"winBar"},[i("WinBar",{attrs:{config:t.winBarConfig},on:{click:t.winBarClick}})],1):t._e(),i("div",{staticClass:"ChatPage-main"},[i("div",{staticClass:"header"},[i("JwChat-item",{attrs:{config:t.config},on:{click:t.bindClick}}),t._t("header")],2),i("div",{staticClass:"main",style:{width:t.winBarWidth?"calc("+t.width+" - "+t.winBarWidth+")":t.width}},[i("div",{staticClass:"chatBox"},[i("JwChat",{ref:"jwChatEmpty",attrs:{taleList:t.taleList,toolConfig:t.toolConfig,scrollType:t.scrollType,width:"100%",height:"calc("+t.height+" - 60px)",config:t.chatConfig,quickList:t.quickList,placeholder:t.placeholder},on:{enter:function(e){return t.$emit("enter",e)},clickTalk:function(e){return t.$emit("clickTalk",e)}},scopedSlots:t._u([t.$scopedSlots.downBtn?{key:"downBtn",fn:function(e){var i=e.unread;return[t._t("downBtn",null,{unread:i})]}}:null],null,!0),model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}},[t._t("tools",null,{slot:"tools"}),t._t("enterBtn",null,{slot:"enterBtn"}),t._t("enter",null,{slot:"enter"})],2)],1),t.showRightBox?i("div",{staticClass:"rightBox",style:t.switchBox?"":"width:0;padding:0;"},[i("span",{on:{click:function(e){t.switchBox=!t.switchBox}}},[t.switchBox?i("JwChat-icon",{staticClass:"switch",attrs:{type:"icon-jiantou-xiangyou"}}):i("JwChat-icon",{staticClass:"switch",attrs:{type:"icon-jiantou-xiangzuo"}})],1),t.switchBox?t._t("default"):t._e()],2):t._e()])])])},Ro=[],Yo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"windowBar",style:t.winBarStyle},[i("div",{ref:"windowBar",staticClass:"winBarBox"},[i("div",[t._l(t.winList,(function(e){return i("div",{key:e.id,ref:"winItem"+e.id,refInFor:!0,class:{winItem:!0,winActive:t.activeItem==e.id},style:t.winItemStyle,on:{click:function(i){return i.stopPropagation(),t.bindClick(e)}}},[i("JwChat-item",{attrs:{config:e}}),i("div",{staticClass:"itemOperation"},[i("el-button",{attrs:{type:"info",icon:"el-icon-close",circle:"",size:"mini"},on:{click:function(i){return i.stopPropagation(),t.bindOperation({type:"remove",target:e})}}})],1)],1)})),t.winList.length?t._e():[i("JwChat-empty",{attrs:{size:"8rem"}}),i("el-divider",{staticStyle:{padding:"0 5px"}},[i("span",{staticStyle:{"font-size":"0.2rem"}},[t._v("暂无会话")])])]],2)])])},$o=[],Xo={props:{config:{typeof:Object,default:function(){return{list:[],active:null,width:"150px",listHeight:"60px"}}}},data:function(){return{activeItem:0,moveObj:{},scroll:null,complete:null,operationTimer:null}},computed:{winList:function(){var t=this.config.list,e=void 0===t?[]:t,i=e;return i},winItemStyle:function(){var t=this.config.listHeight,e=void 0===t?"60px":t;return{height:e}},winBarStyle:function(){var t=this.config.width,e=void 0===t?"150px":t;return{width:e}}},watch:{"config.active":{handler:function(t){t&&(this.activeItem=t)},deep:!0,immediate:!0},"config.list":{handler:function(t){t&&this.scrollRefresh()},deep:!0,immediate:!0}},mounted:function(){var t=this.$refs.windowBar;this.scroll=new Oi(t,{pullingDown:!1})},methods:{bindClick:function(t){var e=t.id;this.activeItem=e,this.$emit("click",{type:"winBar",data:t})},bindOperation:function(t){this.$emit("click",{type:"winBtn",data:t})},scrollRefresh:function(){if(this.scroll){var t=this;t.complete=setInterval((function(){"complete"===document.readyState&&(window.clearInterval(t.complete),t.scroll.refresh())}),50)}}}},Fo=Xo,No=(i("15dd"),u(Fo,Yo,$o,!1,null,"7b376ca4",null)),Wo=No.exports,Vo={name:"JwChat-index",components:{WinBar:Wo},props:{config:{type:Object,default:function(){return{img:"image/cover.png",name:"JwChat",dept:"最简单、最便捷",callback:function(){}}}},showRightBox:{type:Boolean,default:!0},taleList:{type:Array,default:function(){return[]}},height:{type:String,default:"560px"},width:{default:"900px"},value:{default:""},toolConfig:{type:Object},winBarConfig:{type:Object,default:function(){return{}}},scrollType:{default:"noroll"},placeholder:{type:String}},data:function(){return{msg:"",switchBox:!0}},computed:{chatConfig:function(){var t=this.config||{},e=t.historyConfig,i=void 0===e?{}:e;return{historyConfig:i}},winBarWidth:function(){var t=0;return"{}"!==JSON.stringify(this.winBarConfig)&&(t=this.winBarConfig.width),t},quickList:function(){var t=this.config.quickList,e=void 0===t?[]:t;return e}},watch:{value:{handler:function(){this.msg=this.value},immediate:!0},msg:{handler:function(){this.$emit("input",this.msg)},immediate:!0},showRightBox:{handler:function(t){"boolean"===typeof t&&(this.switchBox=t)},immediate:!0}},methods:{bindClick:function(t){var e=this.config||{},i=e.callback;i&&i(t)},winBarClick:function(t){var e=this.winBarConfig.callback,i=void 0===e?null:e;i&&i(t)},finishPullDown:function(){this.$refs.jwChatEmpty.finishPullDown()}}},Jo=Vo,Uo=(i("2135"),u(Jo,Io,Ro,!1,null,"52808c7f",null)),Ko=Uo.exports;Ko.install=function(t){t.component(Ko.name,Ko)};var Go=Ko,Qo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#"+t.type}})])},Zo=[],tn=(i("f9f9"),{name:"JwChat-icon",props:{type:{type:String,required:!0}}}),en=tn,on=(i("e883"),u(en,Qo,Zo,!1,null,null,null)),nn=on.exports;nn.install=function(t){t.component(nn.name,nn)};var rn=nn,sn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item"},[i("el-badge",{attrs:{value:t.config.readNum,hidden:t.config.readNum<1}},[t.config.img?i("img",{staticClass:"cover",style:t.coverSize,attrs:{src:t.config.img},on:{click:function(e){return t.bindClick({key:"cover",value:t.config})}}}):t._e()]),i("div",{staticClass:"info"},[i("p",{staticClass:"name",on:{click:function(e){return t.bindClick({key:"name",value:t.config})}}},[t._v(t._s(t.config.name))]),i("p",{staticClass:"dept",on:{click:function(e){return t.bindClick({key:"dept",value:t.config})}}},[t._v(t._s(t.config.dept))])])],1)},an=[],cn={name:"JwChat-item",props:{config:{type:Object,default:function(){return{img:"",name:"JwChat",dept:""}},required:!0},size:{default:35}},computed:{coverSize:function(){var t=this.size;return"".concat(t).match(/\d$/)&&(t+="px"),{width:t,height:t}}},methods:{bindClick:function(t){var e=t;this.$emit("click",e)}}},ln=cn,hn=(i("ea30"),u(ln,sn,an,!1,null,"506dd17f",null)),pn=hn.exports;pn.install=function(t){t.component(pn.name,pn)};var un=pn,dn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty",style:t.sizeBox},[i("JwChat-icon",{style:t.sizeStyle,attrs:{type:"icon-empty"}})],1)},fn=[],mn={name:"JwChat-empty",props:{size:{default:"5rem"}},computed:{sizeBox:function(){var t=this.size;return"".concat(t).match(/\d$/)&&(t+="px"),{width:t}},sizeStyle:function(){var t=this.size;return"".concat(t).match(/\d$/)&&(t+="px"),{fontSize:"calc(".concat(t," / 2)")}}}},vn=mn,gn=(i("f826"),u(vn,dn,fn,!1,null,"229d24da",null)),yn=gn.exports;yn.install=function(t){t.component(yn.name,yn)};var bn=yn,wn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"notice",staticStyle:{}},[t.info.notice?t._e():i("JwChat-empty",{staticClass:"empty",attrs:{size:"8rem"}}),i("P",{staticStyle:{"padding-left":"0.2rem"}},[t._v(t._s(t.info.tip))]),i("p",{staticStyle:{"font-size":"0.8rem","margin-top":"0.5rem",padding:"0 0.2rem"}},[t._v(" "+t._s(t.info.notice)+" ")])],1),i("div",{staticClass:"userList"},[i("div",[t._v(t._s(t.info.listTip)+" ("+t._s(t.dataList.length)+")")]),i("div",[i("el-input",{attrs:{placeholder:t.info.filterTip,clearable:"",size:"mini"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),i("div",{staticClass:"listBox"},[i("div",{ref:"scrollBox",staticClass:"scrollBox"},[i("ul",t._l(t.dataList,(function(e,o){return i("li",{key:o},[i("JwChat-item",{attrs:{size:"25",config:e},on:{click:t.bindClick}})],1)})),0)])])])])},xn=[],kn={name:"JwChat-rightbox",props:{config:Object},data:function(){return{filter:"",scroll:null}},watch:{"config.list":{handler:function(t){t&&this.scrollRefresh()},deep:!0,immediate:!0}},mounted:function(){var t=this.$refs.scrollBox;this.scroll=new Oi(t,{pullingDown:!1})},computed:{info:function(){var t=this.config,e=t.tip,i=void 0===e?"群公告:":e,o=t.notice,n=void 0===o?"":o,r=t.listTip,s=void 0===r?"组成员":r,a=t.filterTip,c=void 0===a?"搜索好友":a;return{tip:i,notice:n,listTip:s,filterTip:c}},dataList:function(){var t=this.config.list,e=void 0===t?[]:t,i=this.filter;if(!i)return e;var o=[],n=new RegExp(i,"g");return e.forEach((function(t){var e=t.name;n.test(e)&&o.push(t)})),o}},methods:{bindClick:function(t){this.$emit("click",t)},scrollRefresh:function(){if(this.scroll){var t=this;t.complete=setInterval((function(){"complete"===document.readyState&&(window.clearInterval(t.complete),t.scroll.refresh())}),50)}}}},Tn=kn,Sn=(i("ca83"),u(Tn,wn,xn,!1,null,"88ddece2",null)),qn=Sn.exports;qn.install=function(t){t.component(qn.name,qn)};var _n=qn,Pn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[t.showHeader?i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[t._l(t.showNav,(function(e,o){return i("el-menu-item",{key:e,attrs:{index:""+(o+1)}},[t._v(t._s(e))])})),i("i",{staticClass:"addBtn el-icon-circle-plus-outline",style:t.showAddBtn,attrs:{title:"新增"},on:{click:function(e){t.visible=!0}}})],2):t._e(),t.Talelist.length?t._e():i("JwChat-empty"),i("ul",t._l(t.Talelist,(function(e,o){return i("li",{key:e},[i("el-row",[i("el-col",{attrs:{span:0==t.showDelete?21:19}},[i("p",[t._v(t._s(e))])]),i("el-col",{staticStyle:{"text-algin":"right"},attrs:{span:0==t.showDelete?3:5}},[i("i",{staticClass:"el-icon-circle-check",attrs:{title:"发送"},on:{click:function(i){return t.emit({key:"select",value:e})}}}),t.showDelete?i("i",{staticClass:"el-icon-circle-close",attrs:{title:"删除"},on:{click:function(e){return t.emit({key:"delIndex",value:o})}}}):t._e()])],1)],1)})),0),i("el-dialog",{attrs:{title:"新增快捷回复",visible:t.visible,width:"36%","modal-append-to-body":!1},on:{"update:visible":function(e){t.visible=e}}},[i("el-input",{attrs:{rows:3,"show-word-limit":"",maxlength:t.maxlength,placeholder:"请输入快捷回复语",type:"textarea"},model:{value:t.itemQuick,callback:function(e){t.itemQuick=e},expression:"itemQuick"}}),i("div",{staticStyle:{"text-align":"right",margin:"0","margin-top":"10px"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.AddQuickFn}},[t._v("确定")])],1)],1)],1)},Cn=[];function En(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,n,r=[],s=!0,a=!1;try{for(i=i.call(t);!(s=(o=i.next()).done);s=!0)if(r.push(o.value),e&&r.length===e)break}catch(c){a=!0,n=c}finally{try{s||null==i["return"]||i["return"]()}finally{if(a)throw n}}return r}}function Mn(t,e){return g(t)||En(t,e)||w(t,e)||x()}var On={name:"JwChat-talk",props:{Talelist:Array,config:Object},data:function(){var t=this.config.maxlength,e=void 0===t?300:t;return{activeIndex:"1",visible:!1,itemQuick:"",maxlength:e}},computed:{showAddBtn:function(){var t=!0,e="visible",i=this.config.showAdd,o=void 0===i||i;return t=o,t||(e="hidden"),{visibility:e}},showNav:function(){var t=["快捷回复"],e=this.config.nav;if(e){var i=Mn(e,2),o=i[0],n=i[1];t=[o,n]}return t},showDelete:function(){var t=!0,e=this.config||{},i=e.showDeleteBtn;return!1===i&&(t=!1),t}},methods:{showHeader:function(){var t=!0,e=this.config||{},i=e.showHeader,o=void 0===i||i;return!1===o&&(t=!1),t},handleSelect:function(t){this.activeIndex=t,this.emit({key:"navIndex",value:t})},AddQuickFn:function(){var t=this;this.emit({key:"addTalk",value:this.itemQuick}),this.visible=!1,this.$nextTick((function(){t.itemQuick=""}))},emit:function(t){this.$emit("event",t)}}},Bn=On,zn=(i("95f5"),u(Bn,Pn,Cn,!1,null,"643b3e2e",null)),Ln=zn.exports;Ln.install=function(t){t.component(Ln.name,Ln)};var Dn=Ln,jn=[Ho,Go,rn,un,bn,_n,Dn],An=function t(e){t.installed||(t.installed=!0,jn.map((function(t){e.component(t.name,t)})))};"undefined"!==typeof window&&window.Vue&&An(window.Vue);var Hn={install:An,Chat:Ho,ChatPage:Go,Icon:rn,UserItem:un,Empty:bn,RightList:_n,QuickTalk:Dn};e["default"]=Hn},fb6a:function(t,e,i){"use strict";var o=i("23e7"),n=i("e8b5"),r=i("68ee"),s=i("861d"),a=i("23cb"),c=i("50c4"),l=i("fc6a"),h=i("8418"),p=i("b622"),u=i("1dde"),d=u("slice"),f=p("species"),m=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var i,o,p,u=l(this),d=c(u.length),g=a(t,d),y=a(void 0===e?d:e,d);if(n(u)&&(i=u.constructor,r(i)&&(i===Array||n(i.prototype))?i=void 0:s(i)&&(i=i[f],null===i&&(i=void 0)),i===Array||void 0===i))return m.call(u,g,y);for(o=new(void 0===i?Array:i)(v(y-g,0)),p=0;g<y;g++,p++)g in u&&h(o,p,u[g]);return o.length=p,o}})},fc6a:function(t,e,i){var o=i("44ad"),n=i("1d80");t.exports=function(t){return o(n(t))}},fce3:function(t,e,i){var o=i("d039"),n=i("da84"),r=n.RegExp;t.exports=o((function(){var t=r(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,i){var o=i("4930");t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})["default"]}));
\ No newline at end of file
+function te(t){console.error("[BScroll warn]: "+t)}var ee="undefined"!==typeof window,ie=ee&&navigator.userAgent.toLowerCase();ie&&/wechatdevtools/.test(ie),ie&&ie.indexOf("android"),function(){if("string"===typeof ie){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(ie);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();var oe=!1;if(ee){var ne="test-passive";try{var re={};Object.defineProperty(re,"passive",{get:function(){oe=!0}}),window.addEventListener(ne,(function(){}),re)}catch(In){}}var se=function(t,e){for(var i in e)t[i]=e[i];return t},ae=ee&&document.createElement("div").style,ce=function(){if(!ee)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==ae[o.value])return o.key}return!1}();function le(t){return!1===ce?t:"standard"===ce?"transitionEnd"===t?"transitionend":t:ce+t.charAt(0).toUpperCase()+t.substr(1)}function he(t,e,i,o){var n=oe?{passive:!1,capture:!!o}:!!o;t.addEventListener(e,i,n)}function pe(t,e,i,o){t.removeEventListener(e,i,{capture:!!o})}ce&&"standard"!==ce&&ce.toLowerCase();le("transform"),le("transition");function ue(t,e){for(var i in e)if(e[i].test(t[i]))return!0;return!1}ee&&le("perspective"),le("transitionTimingFunction"),le("transitionDuration"),le("transitionDelay"),le("transformOrigin"),le("transitionEnd"),le("transitionProperty");var de=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(he)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(pe)},t.prototype.handleDOMEvents=function(t){var e=this,i=this.wrapper;this.events.forEach((function(o){t(i,o.name,e,!!o.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(i){return i.name===e&&(i.handler(t),!0)}))},t}(),fe=function(){function t(t){this.scroll=t,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return t.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},t.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.mouseWheel?{}:this.scroll.options.mouseWheel,e={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=se(e,t)},t.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},t.prototype.registerEvent=function(){this.eventRegister=new de(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},t.prototype.registerHooks=function(t,e,i){t.on(e,i,this),this.hooksFn.push([t,e,i])},t.prototype.wheelHandler=function(t){if(this.scroll.enabled){this.beforeHandler(t),this.wheelStart||(this.wheelStartHandler(t),this.wheelStart=!0);var e=this.getWheelDelta(t);this.wheelMoveHandler(e),this.wheelEndDetector(e)}},t.prototype.wheelStartHandler=function(t){this.cleanCache();var e=this.scroll.scroller,i=e.scrollBehaviorX,o=e.scrollBehaviorY;i.setMovingDirection(0),o.setMovingDirection(0),i.setDirection(0),o.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},t.prototype.cleanCache=function(){this.deltaCache=[]},t.prototype.wheelMoveHandler=function(t){var e=this,i=this.mouseWheelOpt,o=i.throttleTime,n=i.dampingFactor;if(o&&this.wheelMoveTimer)this.deltaCache.push(t);else{var r=this.deltaCache.reduce((function(t,e){return{x:t.x+e.x,y:t.y+e.y}}),{x:0,y:0});this.cleanCache();var s=this.scroll.scroller,a=s.scrollBehaviorX,c=s.scrollBehaviorY;a.setMovingDirection(-t.directionX),c.setMovingDirection(-t.directionY),a.setDirection(t.x),c.setDirection(t.y);var l=a.performDampingAlgorithm(Math.round(t.x)+r.x,n),h=c.performDampingAlgorithm(Math.round(t.y)+r.x,n);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:l,y:h})){var p=this.getEaseTime();l===this.scroll.x&&h===this.scroll.y||this.scroll.scrollTo(l,h,p)}o&&(this.wheelMoveTimer=window.setTimeout((function(){e.wheelMoveTimer=0}),o))}},t.prototype.wheelEndDetector=function(t){var e=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout((function(){e.wheelStart=!1,window.clearTimeout(e.wheelMoveTimer),e.wheelMoveTimer=0,e.scroll.trigger(e.scroll.eventTypes.mousewheelEnd,t)}),this.mouseWheelOpt.discreteTime)},t.prototype.getWheelDelta=function(t){var e=this.mouseWheelOpt,i=e.speed,o=e.invert,n=0,r=0,s=o?-1:1;switch(!0){case"deltaX"in t:1===t.deltaMode?(n=-t.deltaX*i,r=-t.deltaY*i):(n=-t.deltaX,r=-t.deltaY);break;case"wheelDeltaX"in t:n=t.wheelDeltaX/120*i,r=t.wheelDeltaY/120*i;break;case"wheelDelta"in t:n=r=t.wheelDelta/120*i;break;case"detail"in t:n=r=-t.detail/3*i;break}n*=s,r*=s,this.scroll.hasVerticalScroll||(Math.abs(r)>Math.abs(n)&&(n=r),r=0),this.scroll.hasHorizontalScroll||(n=0);var a=n>0?-1:n<0?1:0,c=r>0?-1:r<0?1:0;return{x:n,y:r,directionX:a,directionY:c}},t.prototype.beforeHandler=function(t){var e=this.scroll.options,i=e.preventDefault,o=e.stopPropagation,n=e.preventDefaultException;i&&!ue(t.target,n)&&t.preventDefault(),o&&t.stopPropagation()},t.prototype.getEaseTime=function(){var t=100,e=this.mouseWheelOpt.easeTime;return e<t&&te("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(e,t)},t.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach((function(t){var e=t[0],i=t[1],o=t[2];e.off(i,o)}))},t.pluginName="mouseWheel",t.applyOrder="pre",t}(),me=fe,ve=function(){return ve=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i],e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},ve.apply(this,arguments)};function ge(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var o=Array(t),n=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,n++)o[n]=r[s];return o}function ye(t){console.error("[BScroll warn]: "+t)}var be="undefined"!==typeof window,we=be&&navigator.userAgent.toLowerCase();we&&/wechatdevtools/.test(we),we&&we.indexOf("android"),function(){if("string"===typeof we){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(we);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();var xe=!1;if(be){var ke="test-passive";try{var Te={};Object.defineProperty(Te,"passive",{get:function(){xe=!0}}),window.addEventListener(ke,(function(){}),Te)}catch(In){}}function Se(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var qe=function(t,e){for(var i in e)t[i]=e[i];return t};function _e(t,e,i){return t<e?e:t>i?i:t}var Pe=be&&document.createElement("div").style,Ce=function(){if(!be)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==Pe[o.value])return o.key}return!1}();function Ee(t){return!1===Ce?t:"standard"===Ce?"transitionEnd"===t?"transitionend":t:Ce+t.charAt(0).toUpperCase()+t.substr(1)}function Me(t,e,i,o){var n=xe?{passive:!1,capture:!!o}:!!o;t.addEventListener(e,i,n)}function Oe(t,e,i,o){t.removeEventListener(e,i,{capture:!!o})}Ce&&"standard"!==Ce&&Ce.toLowerCase();var Be=Ee("transform"),ze=Ee("transition");be&&Ee("perspective");var Le={transform:Be,transition:ze,transitionTimingFunction:Ee("transitionTimingFunction"),transitionDuration:Ee("transitionDuration"),transitionDelay:Ee("transitionDelay"),transformOrigin:Ee("transformOrigin"),transitionEnd:Ee("transitionEnd"),transitionProperty:Ee("transitionProperty")},De=function(){function t(t){this.events={},this.eventTypes={},this.registerType(t)}return t.prototype.on=function(t,e,i){return void 0===i&&(i=this),this.hasType(t),this.events[t]||(this.events[t]=[]),this.events[t].push([e,i]),this},t.prototype.once=function(t,e,i){var o=this;void 0===i&&(i=this),this.hasType(t);var n=function(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];o.off(t,n);var a=e.apply(i,r);if(!0===a)return a};return n.fn=e,this.on(t,n),this},t.prototype.off=function(t,e){if(!t&&!e)return this.events={},this;if(t){if(this.hasType(t),!e)return this.events[t]=[],this;var i=this.events[t];if(!i)return this;var o=i.length;while(o--)(i[o][0]===e||i[o][0]&&i[o][0].fn===e)&&i.splice(o,1);return this}},t.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.hasType(t);var o=this.events[t];if(o)for(var n,r=o.length,s=ge(o),a=0;a<r;a++){var c=s[a],l=c[0],h=c[1];if(l&&(n=l.apply(h,e),!0===n))return n}},t.prototype.registerType=function(t){var e=this;t.forEach((function(t){e.eventTypes[t]=t}))},t.prototype.destroy=function(){this.events={},this.eventTypes={}},t.prototype.hasType=function(t){var e=this.eventTypes,i=e[t]===t;i||ye('EventEmitter has used unknown event type: "'+t+'", should be oneof ['+Object.keys(e).map((function(t){return JSON.stringify(t)}))+"]")},t}(),je=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(Me)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(Oe)},t.prototype.handleDOMEvents=function(t){var e=this,i=this.wrapper;this.events.forEach((function(o){t(i,o.name,e,!!o.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(i){return i.name===e&&(i.handler(t),!0)}))},t}(),Ae=function(){function t(t,e){this.indicator=t,this.options=e,this.hooks=new De(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return t.prototype.registerEvents=function(){var t=this.options,e=t.disableMouse,i=t.disableTouch,o=[],n=[],r=[];e||(o.push({name:"mousedown",handler:this.start.bind(this)}),n.push({name:"mousemove",handler:this.move.bind(this)}),r.push({name:"mouseup",handler:this.end.bind(this)})),i||(o.push({name:"touchstart",handler:this.start.bind(this)}),n.push({name:"touchmove",handler:this.move.bind(this)}),r.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new je(this.indicator.indicatorEl,o),this.moveEventRegister=new je(window,n),this.endEventRegister=new je(window,r)},t.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},t.prototype.start=function(t){if(!this.BScrollIsDisabled()){var e=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.initiated=!0,this.lastPoint=e[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},t.prototype.move=function(t){if(this.initiated){var e=t.touches?t.touches[0]:t,i=e[this.indicator.keysMap.point];t.preventDefault(),t.stopPropagation();var o=i-this.lastPoint;this.lastPoint=i,this.hooks.trigger(this.hooks.eventTypes.touchMove,o)}},t.prototype.end=function(t){this.initiated&&(this.initiated=!1,t.preventDefault(),t.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},t.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},t}(),He=function(){function t(t,e){this.scroll=t,this.options=e,this.hooksFn=[],this.wrapper=e.wrapper,this.direction=e.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return t.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},t.prototype.handleHooks=function(){var t=this,e=this.options,i=e.fade,o=e.interactive,n=e.scrollbarTrackClickable,r=this.scroll,s=r.hooks,a=r.scroller.translater.hooks,c=r.scroller.animater.hooks;if(this.registerHooks(s,s.eventTypes.refresh,this.refresh),this.registerHooks(a,a.eventTypes.translate,(function(e){var i=t.keysMap.hasScroll;t.scroll[i]&&t.updatePosition(e)})),this.registerHooks(c,c.eventTypes.time,this.transitionTime),this.registerHooks(c,c.eventTypes.timeFunction,this.transitionTimingFunction),i&&(this.registerHooks(r,r.eventTypes.scrollEnd,(function(){t.fade()})),this.registerHooks(r,r.eventTypes.scrollStart,(function(){t.fade(!0)})),r.eventTypes.mousewheelStart&&r.eventTypes.mousewheelEnd&&(this.registerHooks(r,r.eventTypes.mousewheelStart,(function(){t.fade(!0)})),this.registerHooks(r,r.eventTypes.mousewheelMove,(function(){t.fade(!0)})),this.registerHooks(r,r.eventTypes.mousewheelEnd,(function(){t.fade()})))),o){var l=this.scroll.options,h=l.disableMouse,p=l.disableTouch;this.eventHandler=new Ae(this,{disableMouse:h,disableTouch:p});var u=this.eventHandler.hooks;this.registerHooks(u,u.eventTypes.touchStart,this.startHandler),this.registerHooks(u,u.eventTypes.touchMove,this.moveHandler),this.registerHooks(u,u.eventTypes.touchEnd,this.endHandler)}n&&this.bindClick()},t.prototype.registerHooks=function(t,e,i){t.on(e,i,this),this.hooksFn.push([t,e,i])},t.prototype.bindClick=function(){var t=this.wrapper;this.clickEventRegister=new je(t,[{name:"click",handler:this.handleClick.bind(this)}])},t.prototype.handleClick=function(t){var e=this.calculateclickOffsetPos(t),i=this.scroll,o=i.x,n=i.y;o="horizontal"===this.direction?e:o,n="vertical"===this.direction?e:n,this.scroll.scrollTo(o,n,this.options.scrollbarTrackOffsetTime)},t.prototype.calculateclickOffsetPos=function(t){var e=this.keysMap,i=e.point,o=e.domRect,n=this.options.scrollbarTrackOffsetType,r=t[i]-this.wrapperRect[o],s=r<this.currentPos?-1:1,a=0,c=this.currentPos;return"step"===n?a=this.scrollInfo.baseSize*s:(a=0,c=r),this.newPos(c,a,this.scrollInfo)},t.prototype.getKeysMap=function(){return"vertical"===this.direction?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},t.prototype.fade=function(t){var e=this.options,i=e.fadeInTime,o=e.fadeOutTime,n=t?i:o,r=this.wrapper;r.style[Le.transitionDuration]=n+"ms",r.style.opacity=t?"1":"0"},t.prototype.refresh=function(){var t=this.keysMap.hasScroll,e=this.scroll,i=e.x,o=e.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(e[t])){var n=this.keysMap,r=n.wrapperSize,s=n.scrollerSize,a=n.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[r],e[s],e[a],this.indicatorEl[r]),this.updatePosition({x:i,y:o})}},t.prototype.transitionTime=function(t){void 0===t&&(t=0),this.indicatorEl.style[Le.transitionDuration]=t+"ms"},t.prototype.transitionTimingFunction=function(t){this.indicatorEl.style[Le.transitionTimingFunction]=t},t.prototype.canScroll=function(t){return this.wrapper.style.display=t?"block":"none",t},t.prototype.refreshScrollInfo=function(t,e,i,o){var n=Math.max(Math.round(t*t/(e||t||1)),this.options.minSize);this.options.isCustom&&(n=o);var r=t-n,s=r/i;return{baseSize:n,maxScrollPos:r,minScrollPos:0,sizeRatio:s}},t.prototype.updatePosition=function(t){var e=this.caculatePosAndSize(t,this.scrollInfo),i=e.pos,o=e.size;this.refreshStyle(o,i),this.currentPos=i},t.prototype.caculatePosAndSize=function(t,e){var i,o=this.keysMap.pos,n=e.sizeRatio,r=e.baseSize,s=e.maxScrollPos,a=e.minScrollPos,c=this.options.minSize,l=Math.round(n*t[o]);return l<a?(i=Math.max(r+3*l,c),l=a):l>s?(i=Math.max(r-3*(l-s),c),l=s+r-i):i=r,{pos:l,size:i}},t.prototype.refreshStyle=function(t,e){var i=this.keysMap,o=i.translateProperty,n=i.size,r=this.scroll.options.translateZ;this.indicatorEl.style[n]=t+"px",this.indicatorEl.style[Le.transform]=o+"("+e+"px)"+r},t.prototype.startHandler=function(){this.moved=!1,this.startTime=Se(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},t.prototype.moveHandler=function(t){if(this.moved||this.indicatorNotMoved(t)||(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var e=this.newPos(this.currentPos,t,this.scrollInfo);this.syncBScroll(e)}},t.prototype.endHandler=function(){if(this.moved){var t=this.scroll,e=t.x,i=t.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:e,y:i})}},t.prototype.indicatorNotMoved=function(t){var e=this.currentPos,i=this.scrollInfo,o=i.maxScrollPos,n=i.minScrollPos,r=e===n&&t<=0||e===o&&t>=0;return r},t.prototype.syncBScroll=function(t){var e=Se(),i=this.scroll,o=i.x,n=i.y,r=i.options,s=i.scroller,a=i.maxScrollY,c=i.minScrollY,l=i.maxScrollX,h=i.minScrollX,p=r.probeType,u=r.momentumLimitTime,d={x:o,y:n};"vertical"===this.direction?d.y=_e(t,a,c):d.x=_e(t,l,h),s.translater.translate(d),e-this.startTime>u&&(this.startTime=e,1===p&&s.hooks.trigger(s.hooks.eventTypes.scroll,d)),p>1&&s.hooks.trigger(s.hooks.eventTypes.scroll,d)},t.prototype.newPos=function(t,e,i){var o=i.maxScrollPos,n=i.sizeRatio,r=i.minScrollPos,s=t+e;return s=_e(s,r,o),Math.round(s/n)},t.prototype.destroy=function(){var t=this.options,e=t.interactive,i=t.scrollbarTrackClickable,o=t.isCustom;e&&this.eventHandler.destroy(),i&&this.clickEventRegister.destroy(),o||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach((function(t){var e=t[0],i=t[1],o=t[2];e.off(i,o)})),this.hooksFn.length=0},t}(),Ie=function(){function t(t){this.scroll=t,this.handleOptions(),this.createIndicators(),this.handleHooks()}return t.prototype.handleHooks=function(){var t=this,e=this.scroll;e.hooks.on(e.hooks.eventTypes.destroy,(function(){for(var e=0,i=t.indicators;e<i.length;e++){var o=i[e];o.destroy()}}))},t.prototype.handleOptions=function(){var t=!0===this.scroll.options.scrollbar?{}:this.scroll.options.scrollbar,e={fade:!0,fadeInTime:250,fadeOutTime:500,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300};this.options=qe(e,t)},t.prototype.createIndicators=function(){for(var t,e=this.scroll,i=[],o=["scrollX","scrollY"],n=["horizontal","vertical"],r=this.options.customElements,s=0;s<o.length;s++){var a=o[s];if(e.options[a]){var c=r.shift(),l=n[s],h=!1,p=c||this.createScrollbarElement(l);p!==c?e.wrapper.appendChild(p):h=!0,t=ve(ve({wrapper:p,direction:l},this.options),{isCustom:h}),i.push(new He(e,t))}}this.indicators=i},t.prototype.createScrollbarElement=function(t,e){void 0===e&&(e=this.options.scrollbarTrackClickable);var i=document.createElement("div"),o=document.createElement("div");return i.style.cssText="position:absolute;z-index:9999;overflow:hidden;",o.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",o.className="bscroll-indicator","horizontal"===t?(i.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",o.style.height="100%",i.className="bscroll-horizontal-scrollbar"):(i.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",o.style.width="100%",i.className="bscroll-vertical-scrollbar"),e||(i.style.cssText+="pointer-events:none;"),i.appendChild(o),i},t.pluginName="scrollbar",t}(),Re=Ie,Ye="undefined"!==typeof window,$e=Ye&&navigator.userAgent.toLowerCase();$e&&/wechatdevtools/.test($e),$e&&$e.indexOf("android"),function(){if("string"===typeof $e){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec($e);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();if(Ye){var Xe="test-passive";try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){!0}}),window.addEventListener(Xe,(function(){}),Fe)}catch(In){}}var Ne=Ye&&document.createElement("div").style,We=function(){if(!Ye)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==Ne[o.value])return o.key}return!1}();function Ve(t){return!1===We?t:"standard"===We?"transitionEnd"===t?"transitionend":t:We+t.charAt(0).toUpperCase()+t.substr(1)}We&&"standard"!==We&&We.toLowerCase();Ve("transform"),Ve("transition");function Je(t){if(t instanceof window.SVGElement){var e=t.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}return{top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}Ye&&Ve("perspective"),Ve("transitionTimingFunction"),Ve("transitionDuration"),Ve("transitionDelay"),Ve("transformOrigin"),Ve("transitionEnd"),Ve("transitionProperty");var Ue=function(){function t(t){this.scroll=t,this.stopObserver=!1,this.init()}return t.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},t.prototype.handleMutationObserver=function(){var t=this;if("undefined"!==typeof MutationObserver){var e=0;this.observer=new MutationObserver((function(i){t.mutationObserverHandler(i,e)})),this.startObserve(this.observer)}else this.checkDOMUpdate()},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){t.stopObserve(),t.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,(function(){t.stopObserver&&t.handleMutationObserver()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,(function(){t.stopObserve()})),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,(function(){t.destroy()}))},t.prototype.mutationObserverHandler=function(t,e){var i=this;if(!this.shouldNotRefresh()){for(var o=!1,n=!1,r=0;r<t.length;r++){var s=t[r];if("attributes"!==s.type){o=!0;break}if(s.target!==this.scroll.scroller.content){n=!0;break}}o?this.scroll.refresh():n&&(clearTimeout(e),e=window.setTimeout((function(){i.shouldNotRefresh()||i.scroll.refresh()}),60))}},t.prototype.startObserve=function(t){var e={attributes:!0,childList:!0,subtree:!0};t.observe(this.scroll.scroller.content,e)},t.prototype.shouldNotRefresh=function(){var t=this.scroll.scroller,e=t.scrollBehaviorX,i=t.scrollBehaviorY,o=e.currentPos>e.minScrollPos||e.currentPos<e.maxScrollPos||i.currentPos>i.minScrollPos||i.currentPos<i.maxScrollPos;return t.animater.pending||o},t.prototype.checkDOMUpdate=function(){var t=this,e=this.scroll.scroller.content,i=Je(e),o=i.width,n=i.height,r=function(){if(!t.stopObserver){i=Je(e);var r=i.width,a=i.height;o===r&&n===a||t.scroll.refresh(),o=r,n=a,s()}},s=function(){setTimeout((function(){r()}),1e3)};s()},t.prototype.registerHooks=function(t,e,i){t.on(e,i,this),this.hooksFn.push([t,e,i])},t.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},t.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach((function(t){var e=t[0],i=t[1],o=t[2];e.off(i,o)})),this.hooksFn.length=0},t.pluginName="observeDOM",t}(),Ke=Ue,Ge="undefined"!==typeof window,Qe=Ge&&navigator.userAgent.toLowerCase();Qe&&/wechatdevtools/.test(Qe),Qe&&Qe.indexOf("android"),function(){if("string"===typeof Qe){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(Qe);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();var Ze=!1;if(Ge){var ti="test-passive";try{var ei={};Object.defineProperty(ei,"passive",{get:function(){Ze=!0}}),window.addEventListener(ti,(function(){}),ei)}catch(In){}}var ii=function(t,e){for(var i in e)t[i]=e[i];return t},oi=Ge&&document.createElement("div").style,ni=function(){if(!Ge)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==oi[o.value])return o.key}return!1}();function ri(t){return!1===ni?t:"standard"===ni?"transitionEnd"===t?"transitionend":t:ni+t.charAt(0).toUpperCase()+t.substr(1)}function si(t,e,i,o){var n=Ze?{passive:!1,capture:!!o}:!!o;t.addEventListener(e,i,n)}function ai(t,e,i,o){t.removeEventListener(e,i,{capture:!!o})}ni&&"standard"!==ni&&ni.toLowerCase();ri("transform"),ri("transition");Ge&&ri("perspective"),ri("transitionTimingFunction"),ri("transitionDuration"),ri("transitionDelay"),ri("transformOrigin"),ri("transitionEnd"),ri("transitionProperty");var ci=function(){function t(t,e){this.wrapper=t,this.events=e,this.addDOMEvents()}return t.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},t.prototype.addDOMEvents=function(){this.handleDOMEvents(si)},t.prototype.removeDOMEvents=function(){this.handleDOMEvents(ai)},t.prototype.handleDOMEvents=function(t){var e=this,i=this.wrapper;this.events.forEach((function(o){t(i,o.name,e,!!o.capture)}))},t.prototype.handleEvent=function(t){var e=t.type;this.events.some((function(i){return i.name===e&&(i.handler(t),!0)}))},t}(),li=function(t){return"img"===t.tagName.toLowerCase()},hi=function(){function t(t){this.scroll=t,this.refreshTimer=0,this.init()}return t.prototype.init=function(){this.handleOptions(this.scroll.options.observeImage),this.bindEventsToWrapper()},t.prototype.handleOptions=function(t){void 0===t&&(t={}),t=!0===t?{}:t;var e={debounceTime:100};this.options=ii(e,t)},t.prototype.bindEventsToWrapper=function(){var t=this.scroll.scroller.wrapper;this.imageLoadEventRegister=new ci(t,[{name:"load",handler:this.load.bind(this),capture:!0}]),this.imageErrorEventRegister=new ci(t,[{name:"error",handler:this.load.bind(this),capture:!0}])},t.prototype.load=function(t){var e=this,i=t.target,o=this.options.debounceTime;i&&li(i)&&(0===o?this.scroll.refresh():(clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout((function(){e.scroll.refresh()}),this.options.debounceTime)))},t.pluginName="observeImage",t}(),pi=hi,ui="undefined"!==typeof window,di=ui&&navigator.userAgent.toLowerCase();di&&/wechatdevtools/.test(di),di&&di.indexOf("android"),function(){if("string"===typeof di){var t=/os (\d\d?_\d(_\d)?)/,e=t.exec(di);if(!e)return!1;var i=e[1].split("_").map((function(t){return parseInt(t,10)}));return!!(13===i[0]&&i[1]>=4)}}();if(ui){var fi="test-passive";try{var mi={};Object.defineProperty(mi,"passive",{get:function(){!0}}),window.addEventListener(fi,(function(){}),mi)}catch(In){}}var vi=function(t,e){for(var i in e)t[i]=e[i];return t},gi=ui&&document.createElement("div").style,yi=function(){if(!ui)return!1;for(var t=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,i=t;e<i.length;e++){var o=i[e];if(void 0!==gi[o.value])return o.key}return!1}();function bi(t){return!1===yi?t:"standard"===yi?"transitionEnd"===t?"transitionend":t:yi+t.charAt(0).toUpperCase()+t.substr(1)}yi&&"standard"!==yi&&yi.toLowerCase();bi("transform"),bi("transition");ui&&bi("perspective"),bi("transitionTimingFunction"),bi("transitionDuration"),bi("transitionDelay"),bi("transformOrigin"),bi("transitionEnd"),bi("transitionProperty");var wi={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(t){return 1+--t*t*t*t*t}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(t){return t*(2-t)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(t){return 1- --t*t*t*t}}},xi="plugins.pullDownRefresh",ki=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}],Ti=ki.map((function(t){return{key:t.key,sourceKey:xi+"."+t.name}})),Si="pullingDown",qi="enterThreshold",_i="leaveThreshold",Pi=function(){function t(t){this.scroll=t,this.pulling=0,this.thresholdBoundary=0,this.init()}return t.prototype.setPulling=function(t){this.pulling=t},t.prototype.setThresholdBoundary=function(t){this.thresholdBoundary=t},t.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},t.prototype.handleBScroll=function(){this.scroll.registerType([Si,qi,_i]),this.scroll.proxy(Ti)},t.prototype.handleOptions=function(t){void 0===t&&(t={}),t=!0===t?{}:t;var e={threshold:40,stop:20};this.options=vi(e,t),this.scroll.options.probeType=3},t.prototype.handleHooks=function(){var t=this;this.hooksFn=[];var e=this.scroll.scroller,i=e.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=i.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,(function(){t.finishPullDown()})),this.registerHooks(i.hooks,i.hooks.eventTypes.computeBoundary,(function(e){e.maxScrollPos>0&&(e.maxScrollPos=-1),e.minScrollPos=t.currentMinScrollY})),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,(function(t){var e=300,i=350;t.discreteTime=e,t.easeTime=i})),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,(function(){e.hooks.trigger(e.hooks.eventTypes.end)})))},t.prototype.registerHooks=function(t,e,i){t.on(e,i,this),this.hooksFn.push([t,e,i])},t.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},t.prototype.watch=function(){var t=this.scroll.scroller;this.watching=!0,this.registerHooks(t.hooks,t.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},t.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(1),this.setThresholdBoundary(0))},t.prototype.checkLocationOfThresholdBoundary=function(){if(1===this.pulling){var t=this.scroll,e=1!==this.thresholdBoundary&&this.locateInsideThresholdBoundary(),i=2!==this.thresholdBoundary&&!this.locateInsideThresholdBoundary();e&&(this.setThresholdBoundary(1),t.trigger(qi)),i&&(this.setThresholdBoundary(2),t.trigger(_i))}},t.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},t.prototype.unwatch=function(){var t=this.scroll,e=t.scroller;this.watching=!1,e.hooks.off(e.hooks.eventTypes.end,this.checkPullDown),t.off(t.eventTypes.scrollStart,this.resetStateBeforeScrollStart),t.off(t.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&t.off(t.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},t.prototype.checkPullDown=function(){var t=this.options,e=t.threshold,i=t.stop;return!(this.scroll.y<e)&&(1===this.pulling&&(this.modifyBehaviorYBoundary(i),this.setPulling(2),this.scroll.trigger(Si)),this.scroll.scrollTo(this.scroll.x,i,this.scroll.options.bounceTime,wi.bounce),this.isFetchingStatus())},t.prototype.isFetchingStatus=function(){return 2===this.pulling},t.prototype.modifyBehaviorYBoundary=function(t){var e=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=e.minScrollPos,this.currentMinScrollY=t,e.computeBoundary()},t.prototype.finishPullDown=function(){if(this.isFetchingStatus()){var t=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,t.computeBoundary(),this.setPulling(0),this.scroll.resetPosition(this.scroll.options.bounceTime,wi.bounce)}},t.prototype.openPullDown=function(t){void 0===t&&(t={}),this.handleOptions(t),this.watching||this.watch()},t.prototype.closePullDown=function(){this.unwatch()},t.prototype.autoPullDownRefresh=function(){var t=this.options,e=t.threshold,i=t.stop;!this.isFetchingStatus()&&this.watching&&(this.modifyBehaviorYBoundary(i),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,e),this.setPulling(2),this.scroll.trigger(Si),this.scroll.scrollTo(this.scroll.x,i,this.scroll.options.bounceTime,wi.bounce))},t.pluginName="pullDownRefresh",t}(),Ci=Pi;Zt.use(me),Zt.use(Re),Zt.use(Ke),Zt.use(pi),Zt.use(Ci);var Ei={moving:{enter:"enter",leave:"leave"},fetching:"fetching",succeed:"succeed"},Mi=function(){function t(e){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(this,t),_(this,"domPotision",[]),_(this,"beforeNode",null),_(this,"viewName",null),_(this,"tipText",""),_(this,"scrollType",""),_(this,"isLoding",!1),_(this,"saveNodes",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.nodes,o=void 0===e?[]:e,n=t.dataList,r=[],s=i.domPotision;for(var a in o)Object.hasOwnProperty.call(o,a)&&function(){var t=o[a],e=JSON.stringify(n[a]),i=t.offsetTop,c={top:i,node:t,read:!1,data:e},l=s.findIndex((function(t){return t.data===e}));if("number"===typeof l&&l>-1){var h=s[l]||{},p=h.read,u=void 0!==p&&p;c.read=u}r.push(c)}();i.domPotision=r,i.readState()}));var n=o.scrollType,r=o.pullingDown,s=void 0===r?{threshold:40,stop:20,mouseWheel:!0}:r;n&&(this.scrollType=n),this.viewName=e;var a=new Zt(e,{scrollY:!0,click:!0,probeType:3,observeDOM:!0,mouseWheel:!0,observeImage:!0,scrollbar:{fade:!1,interactive:!0,scrollbarTrackClickable:!0},pullDownRefresh:s,preventDefault:!1});a.on("scrollEnd",(function(){i.setLoding(!1),i.savePosition()})),s&&(a.on("enterThreshold",(function(){i.setLoding(!0),i.setTipText(Ei.moving.enter)})),a.on("leaveThreshold",(function(){i.setTipText(Ei.moving.leave)}))),this.Scroll=a}return q(t,[{key:"refresh",value:function(){this.Scroll.refresh()}},{key:"setTipText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ei.default,e='<svg width="16" height="16" viewBox="0 0 512 512"><path fill="currentColor" d="M367.997 338.75l-95.998 95.997V17.503h-32v417.242l-95.996-95.995l-22.627 22.627L256 496l134.624-134.623l-22.627-22.627z"></path></svg>',i='<svg width="16" height="16" viewBox="0 0 512 512"><path fill="currentColor" d="M390.624 150.625L256 16L121.376 150.625l22.628 22.627l95.997-95.998v417.982h32V77.257l95.995 95.995l22.628-22.627z"></path></svg>',o={enter:"".concat(e," 下拉加载"),leave:"".concat(i," 加载更多聊天记录"),fetching:"加载中...",succeed:"加载完成"};this.tipText=o[t]}},{key:"finishPullDown",value:function(){this.setTipText(Ei.succeed),this.Scroll.finishPullDown()}},{key:"setLoding",value:function(t){this.isLoding=t}},{key:"pullingDownHandler",value:function(){this.savePosition(0),this.setTipText(Ei.fetching)}},{key:"on",value:function(t,e){var i=this;this.Scroll.on(t,(function(){"pullingDown"===t&&i.pullingDownHandler(),e()}))}},{key:"unread",get:function(){var t=0;return this.domPotision.forEach((function(e){var i=e.read;i||(t+=1)})),t}},{key:"readState",value:function(){var t=this,e=this.Scroll.y,i=Math.abs(e),o=this.viewName.clientHeight||0,n=-1;this.beforeNode&&(n=this.domPotision.findIndex((function(e){return e.data===t.beforeNode.data}))),this.domPotision.forEach((function(t,e){var r=t.top,s=t.node,a=s.clientHeight;(i+o>r+.9*a||n>e)&&(t.read=!0)}))}},{key:"isBottom",get:function(){var t=!1,e=this.Scroll,i=e.y,o=e.maxScrollY;return t=Math.abs(i)>=Math.abs(o),t}},{key:"scrollBottom",value:function(){this.Scroll.scrollTo(0,this.Scroll.maxScrollY,200)}},{key:"scrollPositionDom",value:function(){var t=this.Scroll.y;if(t>=0)return 0;var e=Math.abs(t),i=this.domPotision,o=-1;return i.forEach((function(t,i){var n=t.top;-1===o&&(o=i),e>=n&&(o=i+1)})),o}},{key:"savePosition",value:function(){var t=this.scrollPositionDom();this.beforeNode=this.domPotision[t]}}]),t}(),Oi=Mi,Bi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",{staticClass:"item_msg",on:{click:t.itemCallback}},["span"===t.getTag?i("span",{domProps:{innerHTML:t._s(t.parseText())}}):t._e(),"img"===t.getTag?i("img",{staticClass:"web__msg--img",attrs:{src:t.getData.src,alt:""},on:{click:function(e){return t.showDialog({tag:"img"})},load:function(e){return t.load("img")}}}):t._e(),"video"===t.getTag?i("video",{staticClass:"web__msg--video",attrs:{src:t.getData.src,controls:"controls"},on:{click:function(e){return t.showDialog({tag:"video"})},canplaythrough:function(e){return t.load("video")}}}):t._e(),"audio"===t.getTag?i("audio",{staticClass:"web__msg--audio",staticStyle:{width:"20rem",height:"20px"},attrs:{src:t.getData.src,controls:"controls"},on:{canplaythrough:function(e){return t.load("audio")}}}):t._e(),["video","img"].includes(t.getTag)?i("el-dialog",{staticClass:"web__dialog",attrs:{visible:t.show,width:"40%","append-to-body":"","before-close":t.handleClose},on:{"update:visible":function(e){t.show=e}}},[t.imgSrc?i("img",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.imgSrc}}):t._e(),t.videoSrc?i("video",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.videoSrc,controls:"controls"}}):t._e(),t.audioSrc?i("audio",{staticStyle:{width:"100%","object-fit":"cover"},attrs:{src:t.audioSrc,controls:"controls"}}):t._e()]):t._e()],1)},zi=[];i("5319"),i("1276"),i("caad"),i("2532");function Li(t){return Li="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Li(t)}function Di(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ji(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Ai(t,e,i){return e&&ji(t.prototype,e),i&&ji(t,i),t}var Hi=function(){function t(e){Di(this,t),this.tier=0,this.empty=1,this.index=0,this.children={},e&&this.build(e)}return Ai(t,[{key:"build",value:function(t){for(var e=t.length,i=0;i<e;i++)this.insert(t[i],0,i)}},{key:"insert",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;if(0!==e.length){var n,r,s=this;i!==e.length?(n=e[i],void 0===s.children[n]&&(s.children[n]=new t,s.empty=0,s.children[n].tier=this.tier+1),r=s.children[n],r.insert(e,i+1,o)):s.index=o}}},{key:"searchOne",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i={};if(0===t.length)return i;var o,n,r=this;return i.arr=[],n=t[e],o=r.children[n],void 0!==o&&e<t.length?o.searchOne(t,e+1):void 0===o&&0===r.empty?i:1==r.empty?(i.arr[0]=e-r.tier,i.arr[1]=r.index,i.tier=r.tier,i):i}},{key:"search",value:function(t){if(1==this.empty)return[];for(var e,i=t.length,o=[],n=0;n<i-1;n++)e=this.searchOne(t,n),"undefined"!==typeof e.arr&&e.arr.length>0&&(o.push(e.arr),n=n+e.tier-1);return o}}]),t}(),Ii={"/::)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/0.gif","/::~":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/1.gif","/::B":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/2.gif","/::|":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/3.gif","/:8-)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/4.gif","/::<":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/5.gif","/::$":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/6.gif","/::X":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/7.gif","/::Z":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/8.gif","/::'(":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/9.gif","/::-|":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/10.gif","/::@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/11.gif","/::P":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/12.gif","/::D":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/13.gif","/::O":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/14.gif","/::(":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/15.gif","/::+":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/16.gif","/:--b":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/17.gif","/::Q":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/18.gif","/::T":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/19.gif","/:,@P":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/20.gif","/:,@-D":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/21.gif","/::d":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/22.gif","/:,@o":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/23.gif","/::g":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/24.gif","/:|-)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/25.gif","/::!":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/26.gif","/::L":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/27.gif","/::>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/28.gif","/::,@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/29.gif","/:,@f":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/30.gif","/::-S":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/31.gif","/:?":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/32.gif","/:,@x":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/33.gif","/:,@@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/34.gif","/::8":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/35.gif","/:,@!":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/36.gif","/:!!!":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/37.gif","/:xx":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/38.gif","/:bye":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/39.gif","/:wipe":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/40.gif","/:dig":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/41.gif","/:handclap":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/42.gif","/:&-(":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/43.gif","/:B-)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/44.gif","/:<@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/45.gif","/:@>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/46.gif","/::-O":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/47.gif","/:>-|":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/48.gif","/:P-(":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/49.gif","/::'|":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/50.gif","/:X-)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/51.gif","/::*":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/52.gif","/:@x":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/53.gif","/:8*":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/54.gif","/:pd":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/55.gif","/:<W>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/56.gif","/:beer":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/57.gif","/:basketb":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/58.gif","/:oo":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/59.gif","/:coffee":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/60.gif","/:eat":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/61.gif","/:pig":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/62.gif","/:rose":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/63.gif","/:fade":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/64.gif","/:showlove":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/65.gif","/:heart":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/66.gif","/:break":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/67.gif","/:cake":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/68.gif","/:li":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/69.gif","/:bome":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/70.gif","/:kn":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/71.gif","/:footb":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/72.gif","/:ladybug":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/73.gif","/:shit":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/74.gif","/:moon":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/75.gif","/:sun":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/76.gif","/:gift":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/77.gif","/:hug":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/78.gif","/:strong":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/79.gif","/:weak":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/80.gif","/:share":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/81.gif","/:v":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/82.gif","/:@)":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/83.gif","/:jj":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/84.gif","/:@@":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/85.gif","/:bad":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/86.gif","/:lvu":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/87.gif","/:no":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/88.gif","/:ok":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/89.gif","/:love":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/90.gif","/:<L>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/91.gif","/:jump":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/92.gif","/:shake":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/93.gif","/:<O>":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/94.gif","/:circle":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/95.gif","/:kotow":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/96.gif","/:turn":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/97.gif","/:skip":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/98.gif","/:oY":"https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/99.gif",":smile:":{panel:"b5bd1fe0",position:{col:11,row:3}},":mask:":{panel:"b5bd1fe0",position:{col:4,row:1}},":joy:":{panel:"b5bd1fe0",position:{col:11,row:2}},":stuck_out_tongue_closed_eyes:":{panel:"b5bd1fe0",position:{col:1,row:4}},":flushed:":{panel:"b5bd1fe0",position:{col:11,row:8}},":scream:":{panel:"b5bd1fe0",position:{col:11,row:7}},":pensive:":{panel:"b5bd1fe0",position:{col:11,row:5}},":unamused:":{panel:"b5bd1fe0",position:{col:11,row:4}},"[Hey]":{panel:"b5bd1fe0",position:{col:8,row:7}},"[Smirk]":{panel:"b5bd1fe0",position:{col:2,row:1}},"[Smart]":{panel:"b5bd1fe0",position:{col:2,row:2}},"[Concerned]":{panel:"b5bd1fe0",position:{col:1,row:3}},"[Yeah!]":{panel:"b5bd1fe0",position:{col:3,row:2}},":ghost:":{panel:"b5bd1fe0",position:{col:10,row:10}},":pray:":{panel:"b5bd1fe0",position:{col:11,row:9}},":muscle:":{panel:"b5bd1fe0",position:{col:11,row:1}},":tada:":{panel:"b5bd1fe0",position:{col:9,row:10}},":gift:":{panel:"b5bd1fe0",position:{col:8,row:10}},"[Packet]":{panel:"b5bd1fe0",position:{col:3,row:1}},"[好的]":{panel:"b5bd1fe0",position:{col:7,row:5}},"[加油]":{panel:"b5bd1fe0",position:{col:4,row:6}},"[汗]":{panel:"b5bd1fe0",position:{col:5,row:6}},"[天啊]":{panel:"b5bd1fe0",position:{col:6,row:6}},"[Emm]":{panel:"b5bd1fe0",position:{col:7,row:1}},"[社会社会]":{panel:"b5bd1fe0",position:{col:7,row:2}},"[旺柴]":{panel:"b5bd1fe0",position:{col:7,row:3}},"[加油加油]":{panel:"b5bd1fe0",position:{col:4,row:6}},"[吃瓜]":{panel:"b5bd1fe0",position:{col:3,row:6}},"[Facepalm]":{panel:"b5bd1fe0",position:{col:1,row:2}},"[哇]":{panel:"b5bd1fe0",position:{col:1,row:7}},"[打脸]":{panel:"b5bd1fe0",position:{col:7,row:6}},"[囧]":{panel:"b5bd1fe0",position:{col:5,row:1}}},Ri={url:"https://res.wx.qq.com/wxdoc/dist/assets/img/emoji-sprite.b5bd1fe0.png",width:724,height:658,col:11,row:10,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,gapCol:6,gapRow:6},Yi={b5bd1fe0:Ri,"6AfH8":{url:"https://res.wx.qq.com/a/wx_fed/webwx/res/static/img/6AfH8-r.png",width:480,height:380,col:15,row:12,paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0,gapCol:6,gapRow:6}},$i=Object.keys(Ii),Xi=new Hi($i),Fi=24,Ni=24,Wi={};function Vi(t,e,i,o){return t.slice(0,e)+o+t.slice(e+i)}function Ji(t,e){var i=e.url,o=e.width,n=(e.height,e.col),r=(e.row,e.paddingTop,e.paddingBottom,e.paddingLeft),s=e.paddingRight,a=e.gapCol;e.gapRow;if(!i)return"";var c=(o-r-s-a*(n-1))/n,l=Fi/c,h=o*l;return Wi[t]={scale:l,bgWidth:h},Wi[t]}function Ui(t,e,i){var o=Yi[i],n=o.url,r=o.gapCol,s=o.gapRow;if(!n)return"";var a=Wi[i]||Ji(i,o),c=a.scale,l=a.bgWidth;if("object"===Li(e)){var h=e,p=h.col,u=h.row,d=-(p-1)*(Fi+c*r),f=-(u-1)*(Ni+c*s);e="".concat(d,"px ").concat(f,"px")}return'<a title="'.concat(t,'" style="display: inline-block;background: url(').concat(n,") no-repeat;width: ").concat(Fi,"px;\n    height: ").concat(Ni,"px; background-position:").concat(e,"; background-size: ").concat(l,'px;"></a>')}function Ki(t){var e=Xi.search(t);return e.reverse().map((function(e){var i=e[0],o=$i[e[1]],n=Ii[o],r="object"===Li(n)?Ui(o,n.position,n.panel):-1!==n.indexOf("http")?'<img src="'+n+'" alt="'+o+'">':n;t=Vi(t,i,o.length,r)})),t}var Gi=Ki,Qi={props:{text:String},data:function(){return{tags:["img","video","audio"],show:!1,imgSrc:"",videoSrc:"",audioSrc:"",loadState:!1}},computed:{getTag:function(){var t=this.text||"",e="span",i="";return t.match(/<\/?[^>]+>/)&&(i=t.split(" ")[0].replace(/<|>/,"")||"",this.tags.includes(i)&&(e=i)),e},getData:function(){var t=this.text||"",e=document.createElement("div");e.innerHTML=t;var i=e.firstChild,o=i.getAttribute("data-src"),n=i.getAttribute("controls")||!1;return{src:o,controls:n}}},methods:{load:function(t){this.loadState||(this.loadState=!0,this.$emit("loadDone",{type:t,target:this.text}))},handleClose:function(t){this.imgSrc=void 0,this.videoSrc=void 0,this.audioSrc=void 0,t()},showDialog:function(t){var e=this,i=t.tag,o=this.getData.src,n=function(){"img"===i?(e.imgSrc=o,e.show=!0):"video"===i?(e.videoSrc=o,e.show=!0):"audio"===i?(e.audioSrc=o,e.show=!0):"FILE"===i&&window.open(o)};"function"===typeof this.beforeOpen?this.beforeOpen({tag:i,src:o},n):n()},itemCallback:function(){this.$emit("systemEvent",this.text)},parseText:function(){var t=this.text;if(t){t=t.replace(/\n/g,"<br/>");var e=Gi(t).replace(/<img src/g,'<img data-class="iconBox" src');return e=e.replace("https://res.wx.qq.com/wxdoc/dist/assets/img/emoji-sprite.b5bd1fe0.png","https://codegi.gitee.io/chat/emoji-sprite.png"),e}}},mounted:function(){var t=this,e=this.getTag;this.tags.includes(e)||this.$nextTick((function(){t.$emit("loadDone",{type:e,target:t.text})}))}},Zi=Qi,to=(i("2e58"),u(Zi,Bi,zi,!1,null,"3af7478a",null)),eo=to.exports,io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"systemTalk"},[i("div",{staticClass:"title"},[t._v(t._s(t.text.title))]),i("div",{staticClass:"subtitle"},[t._v(t._s(t.text.subtitle))]),t._l(t.text.content,(function(e){return i("div",{key:JSON.stringify(e)},[i("el-link",{attrs:{type:"primary"},on:{click:function(i){return i.stopPropagation(),t.itemCallback(e)}}},[t._v(t._s(e.text))])],1)}))],2)},oo=[],no={props:{text:{type:Object,default:function(){return{}}}},methods:{itemCallback:function(t){this.$emit("systemEvent",t)}},mounted:function(){var t=this;this.$nextTick((function(){t.$emit("loadDone",{type:"system",target:t.text})}))}},ro=no,so=(i("0605"),u(ro,io,oo,!1,null,"4e632b34",null)),ao=so.exports,co=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shopTalk",on:{click:t.itemCallback}},[i("div",{staticClass:"cover"},[i("img",{attrs:{src:t.text.cover,alt:""}})]),i("div",{staticClass:"price"},[t._v(" "+t._s(t.text.price))]),i("div",{staticClass:"title"},[t._v(t._s(t.text.title))]),t.text.describe?i("div",{staticClass:"subtitle"},[t._v(t._s(t.text.describe))]):t._e(),t.text.tags&&t.text.tags.length?i("div",{staticClass:"tagBox"},t._l(t.text.tags,(function(e,o){return i("span",{key:o},[t._v(" "+t._s(e.name)+" ")])})),0):t._e()])},lo=[];i("b64b"),i("4de4"),i("e439"),i("dbb4");function ho(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function po(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ho(Object(i),!0).forEach((function(e){_(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ho(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var uo={props:{text:{type:Object,default:function(){return{}}}},methods:{itemCallback:function(){this.$emit("systemEvent",po(po({},this.text),{},{type:"shop"}))}},mounted:function(){var t=this;this.$nextTick((function(){t.$emit("loadDone",{type:"shop",target:t.text})}))}},fo=uo,mo=(i("b10c"),u(fo,co,lo,!1,null,"8d5a38ae",null)),vo=mo.exports,go={name:"JwChat_list",components:{itemTalk:eo,systemTalk:ao,shopTalk:vo},props:{list:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{}}}},data:function(){return{scroll:null,stopScroll:!1}},computed:{boxSize:function(){var t=this.config||{},e=t.height,i=void 0===e?"382px":e,o=t.width,n=void 0===o?"525px":o;return"".concat(i).match(/\d$/)&&(i+="px"),"".concat(n).match(/\d$/)&&(n+="px"),{height:i,width:n}},historyConfig:function(){var t=this.config.historyConfig||{},e=t.tip,i=void 0===e?"":e,o=t.show,n=void 0!==o&&o,r=this.scroll||{},s=r.tipText;return{tip:i||s,show:n}},scrollType:function(){var t=this.config.scrollType,e=void 0===t?"noroll":t;return e},unread:function(){var t=this.scroll||{},e=t.unread,i=void 0===e?0:e;return i},showDownBtn:function(){return!!this.scroll&&!this.scroll.isBottom}},watch:{boxSize:function(){this.scroll.refresh()}},methods:{loadDone:function(){"scroll"==this.scrollType&&this.scrollBottom()},scrollBottom:function(){this.scroll&&(this.scroll.isLoding||(this.scroll.refresh(),this.scroll.scrollBottom()))},createScroll:function(){var t=this.historyConfig||{},e=t.show,i=void 0!==e&&e;this.scroll=new Oi(this.$refs.scroller,{scrollType:this.scrollType,pullingDown:i}),this.scroll.on("refresh",this.childnodeLoad),i&&this.scroll.on("pullingDown",this.pullingDownHandler)},finishPullDown:function(){this.scroll.finishPullDown()},childnodeLoad:function(){if("noroll"===this.scrollType){var t=this.$refs.main;if(t){var e=k(t.children),i=e.slice(1);this.scroll.saveNodes({nodes:i,dataList:this.list})}}},pullingDownHandler:function(){this.$emit("loadHistory");this.scroll.finishPullDown();},systemEvent:function(t){this.$emit("click",{type:"systemItem",data:t})},taskEvent:function(t){this.$emit("click",{type:"taskItem",data:t})}},mounted:function(){this.createScroll()}},yo=go,bo=(i("1bb7"),u(yo,m,v,!1,null,"0f64dad9",null)),wo=bo.exports,xo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"toolsBox"},[t.showEmoji?[i("el-popover",{ref:"popover",attrs:{placement:"top-start",trigger:"click"}},[i("ul",{staticClass:"emjioBox"},t._l(Object.keys(t.emoji),(function(e){return i("li",{key:e,on:{click:function(i){return t.selectEmit(e)}}},[t.emoji[e]&&t.emoji[e].position?i("a",{style:t.emojiStyle(e)}):t.emoji[e].length<5?i("a",[t._v(t._s(t.emoji[e]))]):i("img",{attrs:{src:t.emoji[e]}})])})),0),i("JwChat-icon",{staticClass:"toolIcon",attrs:{slot:"reference",type:"icon-xiaolian",title:"表情"},slot:"reference"})],1)]:t._e(),t._l(t.showkeys,(function(e,o){return[t.toolConfig[e]?i("span",{key:e},[i("span",{on:{click:function(i){return t.bindButton(e)}}},[i("JwChat-icon",{staticClass:"toolIcon",attrs:{type:t.toolConfig[e].icon,title:t.iconTitle(e,o)}})],1)]):i("i",{key:e,class:e,on:{click:function(i){return t.bindButton(e)}}})]})),t._t("tools")],2)},ko=[],To=i("d11e"),So={name:"JwChat-tools",props:{tools:{type:Object,default:function(){return{show:["file"],showEmoji:!0,callback:function(){}}}}},data:function(){return{emoji:To,toolConfig:{file:{icon:"icon-wenjian",title:"文件"},video:{icon:"icon-shipin",title:"视频"},img:{icon:"icon-xiangce",title:"图片"},hongbao:{icon:"icon-hongbao",title:"红包"},history:{icon:"icon-lishi",title:"历史"},more:{icon:"icon-gengduo",title:"更多"}},newTitle:null}},computed:{showEmoji:function(){var t=this.tools||{},e=t.showEmoji,i=void 0===e||e;return i},showkeys:function(){var t=this,e=Object.keys(this.toolConfig),i=this.tools||{},o=i.show,n=void 0===o?[]:o,r=[];return n.length>0&&n.forEach((function(i){Array.isArray(i)?t.newTitle=i:e.includes(i)&&r.push(i)})),r}},methods:{iconTitle:function(t,e){var i="";return this.newTitle&&(i=this.newTitle[e]||""),i||(i=this.toolConfig[t].title),i},selectEmit:function(t){this.$emit("emoji",t),this.$refs.popover.doClose()},bindButton:function(t){if(!this.tools.callback)return console.warn("callback not find");"file"===t?this.openFile(t,this.tools.callback):this.tools.callback(t)},openFile:function(t,e){var i=document.createElement("input");i.type="file",i.multiple="multiple",i.click(),i.onchange=function(){var o=i.files;e(t,o)}},emojiStyle:function(t){var e=this.emoji[t];return e?{display:"inline-block",background:"url('https://res.wx.qq.com/a/wx_fed/webwx/res/static/img/6AfH8-r.png')  no-repeat",width:"28px",height:"28px","background-position":e.position}:{}}}},qo=So,_o=(i("bca3"),u(qo,xo,ko,!1,null,"b4bb0df6",null)),Po=_o.exports,Co=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showList.length?i("div",{ref:"quickListBox",staticClass:"quickListBox"},[i("div",{staticClass:"quickList"},t._l(t.showList,(function(e,o){return i("div",{key:o,staticClass:"quickItem"},[i("span",{domProps:{innerHTML:t._s(e.showtext)}}),i("i",{staticClass:"enterBtn el-icon-circle-check",attrs:{title:"选择"},on:{click:function(i){return t.submit(e)}}})])})),0)]):t._e()},Eo=[],Mo=(i("4d63"),i("25f0"),{components:{},data:function(){return{scroll:null,complete:null}},props:{list:{type:Array,default:function(){return[]}},msg:{type:String,default:""}},computed:{showList:function(){var t=this.msg;if(!t)return[];var e=this.list,i=new RegExp(t),o=[];return e.forEach((function(e){var n=e.text;if(i.test(n)){var r=n.replace(i,"<b>".concat(t,"</b>"));o.push(po(po({},e),{},{showtext:r}))}})),o}},methods:{submit:function(t){this.$emit("submit",t)}}}),Oo=Mo,Bo=(i("64b2"),u(Oo,Co,Eo,!1,null,"52dec552",null)),zo=Bo.exports,Lo={name:"JwChat",components:{EnterBox:f,chatList:wo,tools:Po,quickList:zo},props:{taleList:{type:Array,default:function(){return[]}},height:{default:"500px"},width:{default:"550px"},value:{default:""},scrollType:{default:""},toolConfig:{type:Object},config:{},quickList:{type:Array,default:function(){return[]}},placeholder:{type:String}},data:function(){return{msg:"",insert:""}},watch:{value:{handler:function(){this.msg=this.value},immediate:!0},msg:{handler:function(){this.$emit("input",this.msg)},immediate:!0}},computed:{talkHeight:function(){var t=this.height;return"".concat(t).match(/\d$/)?t-=160:t="calc(".concat(t," - 160px)"),t},chatListConfig:function(){var t=this.width,e=this.talkHeight,i=this.scrollType,o=this.config;o=void 0===o?{}:o;var n=o.historyConfig,r=void 0===n?{}:n;return{width:t,height:e,scrollType:i,historyConfig:r}}},methods:{bindEmoji:function(t){var e=this;this.insert=t,this.$nextTick((function(){e.insert=""}))},loadHistoryHandler:function(){var t=this.chatListConfig.historyConfig;t=void 0===t?{}:t;var e=t.callback,i=void 0===e?null:e;i&&i()},quickSubmit:function(t){var e=this,i=t.text;this.msg=i,this.$nextTick((function(){e.$emit("enter",t),e.msg=""}))},finishPullDown:function(){this.$refs.chatList.finishPullDown()}}},Do=Lo,jo=(i("e35f"),u(Do,s,a,!1,null,"f150358a",null)),Ao=jo.exports;Ao.install=function(t){t.component(Ao.name,Ao)};var Ho=Ao,Io=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ChatPage",style:{width:t.width,height:t.height}},["{}"!==JSON.stringify(t.winBarConfig)?i("div",{staticClass:"winBar"},[i("WinBar",{attrs:{config:t.winBarConfig},on:{click:t.winBarClick}})],1):t._e(),i("div",{staticClass:"ChatPage-main"},[i("div",{staticClass:"header"},[i("JwChat-item",{attrs:{config:t.config},on:{click:t.bindClick}}),t._t("header")],2),i("div",{staticClass:"main",style:{width:t.winBarWidth?"calc("+t.width+" - "+t.winBarWidth+")":t.width}},[i("div",{staticClass:"chatBox"},[i("JwChat",{ref:"jwChatEmpty",attrs:{taleList:t.taleList,toolConfig:t.toolConfig,scrollType:t.scrollType,width:"100%",height:"calc("+t.height+" - 60px)",config:t.chatConfig,quickList:t.quickList,placeholder:t.placeholder},on:{enter:function(e){return t.$emit("enter",e)},clickTalk:function(e){return t.$emit("clickTalk",e)}},scopedSlots:t._u([t.$scopedSlots.downBtn?{key:"downBtn",fn:function(e){var i=e.unread;return[t._t("downBtn",null,{unread:i})]}}:null],null,!0),model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}},[t._t("tools",null,{slot:"tools"}),t._t("enterBtn",null,{slot:"enterBtn"}),t._t("enter",null,{slot:"enter"})],2)],1),t.showRightBox?i("div",{staticClass:"rightBox",style:t.switchBox?"":"width:0;padding:0;"},[i("span",{on:{click:function(e){t.switchBox=!t.switchBox}}},[t.switchBox?i("JwChat-icon",{staticClass:"switch",attrs:{type:"icon-jiantou-xiangyou"}}):i("JwChat-icon",{staticClass:"switch",attrs:{type:"icon-jiantou-xiangzuo"}})],1),t.switchBox?t._t("default"):t._e()],2):t._e()])])])},Ro=[],Yo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"windowBar",style:t.winBarStyle},[i("div",{ref:"windowBar",staticClass:"winBarBox"},[i("div",[t._l(t.winList,(function(e){return i("div",{key:e.id,ref:"winItem"+e.id,refInFor:!0,class:{winItem:!0,winActive:t.activeItem==e.id},style:t.winItemStyle,on:{click:function(i){return i.stopPropagation(),t.bindClick(e)}}},[i("JwChat-item",{attrs:{config:e}}),i("div",{staticClass:"itemOperation"},[i("el-button",{attrs:{type:"info",icon:"el-icon-close",circle:"",size:"mini"},on:{click:function(i){return i.stopPropagation(),t.bindOperation({type:"remove",target:e})}}})],1)],1)})),t.winList.length?t._e():[i("JwChat-empty",{attrs:{size:"8rem"}}),i("el-divider",{staticStyle:{padding:"0 5px"}},[i("span",{staticStyle:{"font-size":"0.2rem"}},[t._v("暂无会话")])])]],2)])])},$o=[],Xo={props:{config:{typeof:Object,default:function(){return{list:[],active:null,width:"150px",listHeight:"60px"}}}},data:function(){return{activeItem:0,moveObj:{},scroll:null,complete:null,operationTimer:null}},computed:{winList:function(){var t=this.config.list,e=void 0===t?[]:t,i=e;return i},winItemStyle:function(){var t=this.config.listHeight,e=void 0===t?"60px":t;return{height:e}},winBarStyle:function(){var t=this.config.width,e=void 0===t?"150px":t;return{width:e}}},watch:{"config.active":{handler:function(t){t&&(this.activeItem=t)},deep:!0,immediate:!0},"config.list":{handler:function(t){t&&this.scrollRefresh()},deep:!0,immediate:!0}},mounted:function(){var t=this.$refs.windowBar;this.scroll=new Oi(t,{pullingDown:!1})},methods:{bindClick:function(t){var e=t.id;this.activeItem=e,this.$emit("click",{type:"winBar",data:t})},bindOperation:function(t){this.$emit("click",{type:"winBtn",data:t})},scrollRefresh:function(){if(this.scroll){var t=this;t.complete=setInterval((function(){"complete"===document.readyState&&(window.clearInterval(t.complete),t.scroll.refresh())}),50)}}}},Fo=Xo,No=(i("15dd"),u(Fo,Yo,$o,!1,null,"7b376ca4",null)),Wo=No.exports,Vo={name:"JwChat-index",components:{WinBar:Wo},props:{config:{type:Object,default:function(){return{img:"image/cover.png",name:"JwChat",dept:"最简单、最便捷",callback:function(){}}}},showRightBox:{type:Boolean,default:!0},taleList:{type:Array,default:function(){return[]}},height:{type:String,default:"560px"},width:{default:"900px"},value:{default:""},toolConfig:{type:Object},winBarConfig:{type:Object,default:function(){return{}}},scrollType:{default:"noroll"},placeholder:{type:String}},data:function(){return{msg:"",switchBox:!0}},computed:{chatConfig:function(){var t=this.config||{},e=t.historyConfig,i=void 0===e?{}:e;return{historyConfig:i}},winBarWidth:function(){var t=0;return"{}"!==JSON.stringify(this.winBarConfig)&&(t=this.winBarConfig.width),t},quickList:function(){var t=this.config.quickList,e=void 0===t?[]:t;return e}},watch:{value:{handler:function(){this.msg=this.value},immediate:!0},msg:{handler:function(){this.$emit("input",this.msg)},immediate:!0},showRightBox:{handler:function(t){"boolean"===typeof t&&(this.switchBox=t)},immediate:!0}},methods:{bindClick:function(t){var e=this.config||{},i=e.callback;i&&i(t)},winBarClick:function(t){var e=this.winBarConfig.callback,i=void 0===e?null:e;i&&i(t)},finishPullDown:function(){this.$refs.jwChatEmpty.finishPullDown()}}},Jo=Vo,Uo=(i("2135"),u(Jo,Io,Ro,!1,null,"52808c7f",null)),Ko=Uo.exports;Ko.install=function(t){t.component(Ko.name,Ko)};var Go=Ko,Qo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#"+t.type}})])},Zo=[],tn=(i("f9f9"),{name:"JwChat-icon",props:{type:{type:String,required:!0}}}),en=tn,on=(i("e883"),u(en,Qo,Zo,!1,null,null,null)),nn=on.exports;nn.install=function(t){t.component(nn.name,nn)};var rn=nn,sn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item"},[i("el-badge",{attrs:{value:t.config.readNum,hidden:t.config.readNum<1}},[t.config.img?i("img",{staticClass:"cover",style:t.coverSize,attrs:{src:t.config.img},on:{click:function(e){return t.bindClick({key:"cover",value:t.config})}}}):t._e()]),i("div",{staticClass:"info"},[i("p",{staticClass:"name",on:{click:function(e){return t.bindClick({key:"name",value:t.config})}}},[t._v(t._s(t.config.name))]),i("p",{staticClass:"dept",on:{click:function(e){return t.bindClick({key:"dept",value:t.config})}}},[t._v(t._s(t.config.dept))])])],1)},an=[],cn={name:"JwChat-item",props:{config:{type:Object,default:function(){return{img:"",name:"JwChat",dept:""}},required:!0},size:{default:35}},computed:{coverSize:function(){var t=this.size;return"".concat(t).match(/\d$/)&&(t+="px"),{width:t,height:t}}},methods:{bindClick:function(t){var e=t;this.$emit("click",e)}}},ln=cn,hn=(i("ea30"),u(ln,sn,an,!1,null,"506dd17f",null)),pn=hn.exports;pn.install=function(t){t.component(pn.name,pn)};var un=pn,dn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"empty",style:t.sizeBox},[i("JwChat-icon",{style:t.sizeStyle,attrs:{type:"icon-empty"}})],1)},fn=[],mn={name:"JwChat-empty",props:{size:{default:"5rem"}},computed:{sizeBox:function(){var t=this.size;return"".concat(t).match(/\d$/)&&(t+="px"),{width:t}},sizeStyle:function(){var t=this.size;return"".concat(t).match(/\d$/)&&(t+="px"),{fontSize:"calc(".concat(t," / 2)")}}}},vn=mn,gn=(i("f826"),u(vn,dn,fn,!1,null,"229d24da",null)),yn=gn.exports;yn.install=function(t){t.component(yn.name,yn)};var bn=yn,wn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[i("div",{staticClass:"notice",staticStyle:{}},[t.info.notice?t._e():i("JwChat-empty",{staticClass:"empty",attrs:{size:"8rem"}}),i("P",{staticStyle:{"padding-left":"0.2rem"}},[t._v(t._s(t.info.tip))]),i("p",{staticStyle:{"font-size":"0.8rem","margin-top":"0.5rem",padding:"0 0.2rem"}},[t._v(" "+t._s(t.info.notice)+" ")])],1),i("div",{staticClass:"userList"},[i("div",[t._v(t._s(t.info.listTip)+" ("+t._s(t.dataList.length)+")")]),i("div",[i("el-input",{attrs:{placeholder:t.info.filterTip,clearable:"",size:"mini"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),i("div",{staticClass:"listBox"},[i("div",{ref:"scrollBox",staticClass:"scrollBox"},[i("ul",t._l(t.dataList,(function(e,o){return i("li",{key:o},[i("JwChat-item",{attrs:{size:"25",config:e},on:{click:t.bindClick}})],1)})),0)])])])])},xn=[],kn={name:"JwChat-rightbox",props:{config:Object},data:function(){return{filter:"",scroll:null}},watch:{"config.list":{handler:function(t){t&&this.scrollRefresh()},deep:!0,immediate:!0}},mounted:function(){var t=this.$refs.scrollBox;this.scroll=new Oi(t,{pullingDown:!1})},computed:{info:function(){var t=this.config,e=t.tip,i=void 0===e?"群公告:":e,o=t.notice,n=void 0===o?"":o,r=t.listTip,s=void 0===r?"组成员":r,a=t.filterTip,c=void 0===a?"搜索好友":a;return{tip:i,notice:n,listTip:s,filterTip:c}},dataList:function(){var t=this.config.list,e=void 0===t?[]:t,i=this.filter;if(!i)return e;var o=[],n=new RegExp(i,"g");return e.forEach((function(t){var e=t.name;n.test(e)&&o.push(t)})),o}},methods:{bindClick:function(t){this.$emit("click",t)},scrollRefresh:function(){if(this.scroll){var t=this;t.complete=setInterval((function(){"complete"===document.readyState&&(window.clearInterval(t.complete),t.scroll.refresh())}),50)}}}},Tn=kn,Sn=(i("ca83"),u(Tn,wn,xn,!1,null,"88ddece2",null)),qn=Sn.exports;qn.install=function(t){t.component(qn.name,qn)};var _n=qn,Pn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wrapper"},[t.showHeader?i("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal"},on:{select:t.handleSelect}},[t._l(t.showNav,(function(e,o){return i("el-menu-item",{key:e,attrs:{index:""+(o+1)}},[t._v(t._s(e))])})),i("i",{staticClass:"addBtn el-icon-circle-plus-outline",style:t.showAddBtn,attrs:{title:"新增"},on:{click:function(e){t.visible=!0}}})],2):t._e(),t.Talelist.length?t._e():i("JwChat-empty"),i("ul",t._l(t.Talelist,(function(e,o){return i("li",{key:e},[i("el-row",[i("el-col",{attrs:{span:0==t.showDelete?21:19}},[i("p",[t._v(t._s(e))])]),i("el-col",{staticStyle:{"text-algin":"right"},attrs:{span:0==t.showDelete?3:5}},[i("i",{staticClass:"el-icon-circle-check",attrs:{title:"发送"},on:{click:function(i){return t.emit({key:"select",value:e})}}}),t.showDelete?i("i",{staticClass:"el-icon-circle-close",attrs:{title:"删除"},on:{click:function(e){return t.emit({key:"delIndex",value:o})}}}):t._e()])],1)],1)})),0),i("el-dialog",{attrs:{title:"新增快捷回复",visible:t.visible,width:"36%","modal-append-to-body":!1},on:{"update:visible":function(e){t.visible=e}}},[i("el-input",{attrs:{rows:3,"show-word-limit":"",maxlength:t.maxlength,placeholder:"请输入快捷回复语",type:"textarea"},model:{value:t.itemQuick,callback:function(e){t.itemQuick=e},expression:"itemQuick"}}),i("div",{staticStyle:{"text-align":"right",margin:"0","margin-top":"10px"}},[i("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.visible=!1}}},[t._v("取消")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.AddQuickFn}},[t._v("确定")])],1)],1)],1)},Cn=[];function En(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,n,r=[],s=!0,a=!1;try{for(i=i.call(t);!(s=(o=i.next()).done);s=!0)if(r.push(o.value),e&&r.length===e)break}catch(c){a=!0,n=c}finally{try{s||null==i["return"]||i["return"]()}finally{if(a)throw n}}return r}}function Mn(t,e){return g(t)||En(t,e)||w(t,e)||x()}var On={name:"JwChat-talk",props:{Talelist:Array,config:Object},data:function(){var t=this.config.maxlength,e=void 0===t?300:t;return{activeIndex:"1",visible:!1,itemQuick:"",maxlength:e}},computed:{showAddBtn:function(){var t=!0,e="visible",i=this.config.showAdd,o=void 0===i||i;return t=o,t||(e="hidden"),{visibility:e}},showNav:function(){var t=["快捷回复"],e=this.config.nav;if(e){var i=Mn(e,2),o=i[0],n=i[1];t=[o,n]}return t},showDelete:function(){var t=!0,e=this.config||{},i=e.showDeleteBtn;return!1===i&&(t=!1),t}},methods:{showHeader:function(){var t=!0,e=this.config||{},i=e.showHeader,o=void 0===i||i;return!1===o&&(t=!1),t},handleSelect:function(t){this.activeIndex=t,this.emit({key:"navIndex",value:t})},AddQuickFn:function(){var t=this;this.emit({key:"addTalk",value:this.itemQuick}),this.visible=!1,this.$nextTick((function(){t.itemQuick=""}))},emit:function(t){this.$emit("event",t)}}},Bn=On,zn=(i("95f5"),u(Bn,Pn,Cn,!1,null,"643b3e2e",null)),Ln=zn.exports;Ln.install=function(t){t.component(Ln.name,Ln)};var Dn=Ln,jn=[Ho,Go,rn,un,bn,_n,Dn],An=function t(e){t.installed||(t.installed=!0,jn.map((function(t){e.component(t.name,t)})))};"undefined"!==typeof window&&window.Vue&&An(window.Vue);var Hn={install:An,Chat:Ho,ChatPage:Go,Icon:rn,UserItem:un,Empty:bn,RightList:_n,QuickTalk:Dn};e["default"]=Hn},fb6a:function(t,e,i){"use strict";var o=i("23e7"),n=i("e8b5"),r=i("68ee"),s=i("861d"),a=i("23cb"),c=i("50c4"),l=i("fc6a"),h=i("8418"),p=i("b622"),u=i("1dde"),d=u("slice"),f=p("species"),m=[].slice,v=Math.max;o({target:"Array",proto:!0,forced:!d},{slice:function(t,e){var i,o,p,u=l(this),d=c(u.length),g=a(t,d),y=a(void 0===e?d:e,d);if(n(u)&&(i=u.constructor,r(i)&&(i===Array||n(i.prototype))?i=void 0:s(i)&&(i=i[f],null===i&&(i=void 0)),i===Array||void 0===i))return m.call(u,g,y);for(o=new(void 0===i?Array:i)(v(y-g,0)),p=0;g<y;g++,p++)g in u&&h(o,p,u[g]);return o.length=p,o}})},fc6a:function(t,e,i){var o=i("44ad"),n=i("1d80");t.exports=function(t){return o(n(t))}},fce3:function(t,e,i){var o=i("d039"),n=i("da84"),r=n.RegExp;t.exports=o((function(){var t=r(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)}))},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,i){var o=i("4930");t.exports=o&&!Symbol.sham&&"symbol"==typeof Symbol.iterator}})["default"]}));
\ No newline at end of file
